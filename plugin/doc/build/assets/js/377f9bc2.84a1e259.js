"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2708],{4328:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/static-dynamic-configuration-3158549aee80e7d78ffd53edf9c601b5.png"},4513:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"getting-started/configuration-overview","title":"Mesh Configuration Documentation","description":"Get started with Mesh Proxy. This page will introduce you to the dynamic routing and startup configurations. Read the technical documentation.","source":"@site/docs/getting-started/configuration-overview.md","sourceDirName":"getting-started","slug":"/getting-started/configuration-overview","permalink":"/doc/docs/getting-started/configuration-overview","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/getting-started/configuration-overview.md","tags":[],"version":"current","frontMatter":{"title":"Mesh Configuration Documentation","description":"Get started with Mesh Proxy. This page will introduce you to the dynamic routing and startup configurations. Read the technical documentation."},"sidebar":"tutorialSidebar","previous":{"title":"Concepts","permalink":"/doc/docs/getting-started/concepts"},"next":{"title":"Mesh Getting Started FAQ","permalink":"/doc/docs/getting-started/faq"}}');var o=i(4848),r=i(8453);const s={title:"Mesh Configuration Documentation",description:"Get started with Mesh Proxy. This page will introduce you to the dynamic routing and startup configurations. Read the technical documentation."},a="Configuration Introduction",c={},d=[{value:"The Dynamic Configuration",id:"the-dynamic-configuration",level:2},{value:"The Static Configuration",id:"the-static-configuration",level:2},{value:"Configuration File",id:"configuration-file",level:3},{value:"Arguments",id:"arguments",level:3},{value:"Environment Variables",id:"environment-variables",level:3},{value:"Available Configuration Options",id:"available-configuration-options",level:2}];function l(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"configuration-introduction",children:"Configuration Introduction"})}),"\n",(0,o.jsx)(n.p,{children:"How the Magic Happens"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"Configuration",src:i(4328).A+"",width:"719",height:"398"})}),"\n",(0,o.jsx)(n.p,{children:"Configuration in Mesh can refer to two different things:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The fully dynamic routing configuration (referred to as the ",(0,o.jsx)(n.em,{children:"dynamic configuration"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:["The startup configuration (referred to as the ",(0,o.jsx)(n.em,{children:"static configuration"}),")"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Elements in the ",(0,o.jsx)(n.em,{children:"static configuration"})," set up connections to ",(0,o.jsx)(n.a,{href:"/doc/docs/providers/overview",children:"providers"})," and define the ",(0,o.jsx)(n.a,{href:"/doc/docs/routing/entrypoints",children:"entrypoints"})," Mesh will listen to (these elements don't change often)."]}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.em,{children:"dynamic configuration"})," contains everything that defines how the requests are handled by your system.\nThis configuration can change and is seamlessly hot-reloaded, without any request interruption or connection loss."]}),"\n",(0,o.jsx)(n.p,{children:'!!! warning "Incompatible Configuration"\nPlease be aware that the old configurations for Mesh v1.x are NOT compatible with the v2.x config as of now.\nIf you are running v2, please ensure you are using a v2 configuration.'}),"\n",(0,o.jsx)(n.h2,{id:"the-dynamic-configuration",children:"The Dynamic Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Mesh gets its ",(0,o.jsx)(n.em,{children:"dynamic configuration"})," from ",(0,o.jsx)(n.a,{href:"/doc/docs/providers/overview",children:"providers"}),": whether an orchestrator, a service registry, or a plain old configuration file."]}),"\n",(0,o.jsxs)(n.p,{children:["Since this configuration is specific to your infrastructure choices, we invite you to refer to the ",(0,o.jsx)(n.a,{href:"/doc/docs/routing/overview",children:"dedicated section of this documentation"}),"."]}),"\n",(0,o.jsx)(n.p,{children:'!!! info ""'}),"\n",(0,o.jsxs)(n.p,{children:["In the ",(0,o.jsx)(n.a,{href:"/doc/docs/getting-started/quick-start",children:"Quick Start example"}),", the dynamic configuration comes from docker in the form of labels attached to your containers."]}),"\n",(0,o.jsx)(n.p,{children:'!!! info "HTTPS Certificates also belong to the dynamic configuration."'}),"\n",(0,o.jsx)(n.p,{children:"You can add / update / remove them without restarting your Mesh instance."}),"\n",(0,o.jsx)(n.h2,{id:"the-static-configuration",children:"The Static Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["There are three different, ",(0,o.jsx)(n.strong,{children:"mutually exclusive"})," (i.e. you can use only one at the same time), ways to define static configuration options in Mesh:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"In a configuration file"}),"\n",(0,o.jsx)(n.li,{children:"In the command-line arguments"}),"\n",(0,o.jsx)(n.li,{children:"As environment variables"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"These ways are evaluated in the order listed above."}),"\n",(0,o.jsx)(n.p,{children:"If no value was provided for a given option, a default value applies.\nMoreover, if an option has sub-options, and any of these sub-options is not specified, a default value will apply as well."}),"\n",(0,o.jsxs)(n.p,{children:["For example, the ",(0,o.jsx)(n.code,{children:"--providers.docker"})," option is enough by itself to enable the docker provider, even though sub-options like ",(0,o.jsx)(n.code,{children:"--providers.docker.endpoint"})," exist.\nOnce positioned, this option sets (and resets) all the default values of the sub-options of ",(0,o.jsx)(n.code,{children:"--providers.docker"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"configuration-file",children:"Configuration File"}),"\n",(0,o.jsxs)(n.p,{children:["At startup, Mesh searches for static configuration in a file named ",(0,o.jsx)(n.code,{children:"Mesh.yml"})," (or ",(0,o.jsx)(n.code,{children:"Mesh.yaml"})," or ",(0,o.jsx)(n.code,{children:"Mesh.toml"}),") in:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"/etc/Mesh/"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"$XDG_CONFIG_HOME/"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"$HOME/.config/"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"."})," (",(0,o.jsx)(n.em,{children:"the working directory"}),")."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["You can override this using the ",(0,o.jsx)(n.code,{children:"configFile"})," argument."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"Mesh --configFile=foo/bar/myconfigfile.yml\n"})}),"\n",(0,o.jsx)(n.h3,{id:"arguments",children:"Arguments"}),"\n",(0,o.jsx)(n.p,{children:"To get the list of all available arguments:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"Mesh --help\n\n# or\n\ndocker run Mesh[:version] --help\n# ex: docker run Mesh:v3.4 --help\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Check the ",(0,o.jsx)(n.a,{href:"/doc/docs/reference/static-configuration/cli",title:"Link to CLI reference overview",children:"CLI reference"})," for an overview about all available arguments."]}),"\n",(0,o.jsx)(n.h3,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsxs)(n.p,{children:["All available environment variables can be found in the ",(0,o.jsx)(n.a,{href:"/doc/docs/reference/static-configuration/env",children:"static configuration environment overview"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"available-configuration-options",children:"Available Configuration Options"}),"\n",(0,o.jsx)(n.p,{children:"All the configuration options are documented in their related section."}),"\n",(0,o.jsxs)(n.p,{children:["You can browse the available features in the menu, the ",(0,o.jsx)(n.a,{href:"/doc/docs/providers/overview",children:"providers"}),", or the ",(0,o.jsx)(n.a,{href:"/doc/docs/routing/overview",children:"routing section"})," to see them in action."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(6540);const o={},r=t.createContext(o);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);