"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[2265],{4697:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"contributing/submitting-pull-requests","title":"Mesh Pull Requests Documentation","description":"Looking to contribute to Mesh Proxy? This guide will show you the guidelines for submitting a PR in our contributors guide repository.","source":"@site/docs/contributing/submitting-pull-requests.md","sourceDirName":"contributing","slug":"/contributing/submitting-pull-requests","permalink":"/doc/docs/contributing/submitting-pull-requests","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/contributing/submitting-pull-requests.md","tags":[],"version":"current","frontMatter":{"title":"Mesh Pull Requests Documentation","description":"Looking to contribute to Mesh Proxy? This guide will show you the guidelines for submitting a PR in our contributors guide repository."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh Submitting Issues Documentation","permalink":"/doc/docs/contributing/submitting-issues"},"next":{"title":"Mesh Security Documentation","permalink":"/doc/docs/contributing/submitting-security-issues"}}');var i=t(4848),o=t(8453);const r={title:"Mesh Pull Requests Documentation",description:"Looking to contribute to Mesh Proxy? This guide will show you the guidelines for submitting a PR in our contributors guide repository."},l="Before You Submit a Pull Request",a={},h=[{value:"How We Prioritize",id:"how-we-prioritize",level:2},{value:"The Pull Request Submit Process",id:"the-pull-request-submit-process",level:2},{value:"Pull Request Review Cycle",id:"pull-request-review-cycle",level:2},{value:"Run Local Verifications",id:"run-local-verifications",level:2},{value:"The Testing and Merge Workflow",id:"the-testing-and-merge-workflow",level:2},{value:"Why Was My Pull Request Closed?",id:"why-was-my-pull-request-closed",level:2},{value:"Why is My Pull Request Not Getting Reviewed",id:"why-is-my-pull-request-not-getting-reviewed",level:2},{value:"It&#39;s OK to Push Back",id:"its-ok-to-push-back",level:2},{value:"Common Sense and Courtesy",id:"common-sense-and-courtesy",level:2}];function u(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"before-you-submit-a-pull-request",children:"Before You Submit a Pull Request"})}),"\n",(0,i.jsxs)(n.p,{children:["This guide is for contributors who already have a pull request to submit.\nIf you are looking for information on setting up your developer environment\nand creating code to contribute to Mesh Proxy or related projects,\nsee the ",(0,i.jsx)(n.a,{href:"https://docs.Mesh.io/contributing/building-testing/",children:"development guide"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Looking for a way to contribute to Mesh Proxy?\nCheck out this list of ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/Mesh/labels/contributor%2Fwanted",children:"Priority Issues"}),",\nthe ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/Mesh/labels/contributor%2Fgood-first-issue",children:"Good First Issue"})," list,\nor the list of ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/Mesh/labels/kind%2Fbug%2Fconfirmed",children:"confirmed bugs"})," waiting to be remedied."]}),"\n",(0,i.jsx)(n.h2,{id:"how-we-prioritize",children:"How We Prioritize"}),"\n",(0,i.jsx)(n.p,{children:"We wish we could review every pull request right away, but because it's a time-consuming operation, it's not always possible."}),"\n",(0,i.jsx)(n.p,{children:"The PRs we are able to handle the fastest are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Documentation updates."}),"\n",(0,i.jsx)(n.li,{children:"Bug fixes."}),"\n",(0,i.jsxs)(n.li,{children:["Enhancements and Features with a ",(0,i.jsx)(n.code,{children:"contributor/wanted"})," tag."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"PRs that take more time to address include:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Enhancements or Features without the ",(0,i.jsx)(n.code,{children:"contributor/wanted"})," tag."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If you have an idea for an enhancement or feature that you would like to build,\n",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/Mesh/issues/new/choose",children:"create an issue"})," for it first\nand tell us you are interested in writing the PR.\nIf an issue already exists, definitely comment on it to tell us you are interested in creating a PR."]}),"\n",(0,i.jsx)(n.p,{children:"This will allow us to communicate directly and let you know if it is something we would accept."}),"\n",(0,i.jsx)(n.p,{children:"It also allows us to make sure you have all the information you need during the design phase\nso that it can be reviewed and merged quickly."}),"\n",(0,i.jsxs)(n.p,{children:["Read more about the ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/contributors-guide/blob/master/issue_triage.md",children:"Triage process"})," in the docs."]}),"\n",(0,i.jsx)(n.h2,{id:"the-pull-request-submit-process",children:"The Pull Request Submit Process"}),"\n",(0,i.jsx)(n.p,{children:"Merging a PR requires the following steps to be completed before it is merged automatically."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Make sure your pull request adheres to our best practices. These include:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/Mesh/Mesh/blob/master/docs/content/contributing/maintainers-guidelines.md",children:"Following project conventions"}),"; including using the PR Template."]}),"\n",(0,i.jsx)(n.li,{children:"Make small pull requests."}),"\n",(0,i.jsx)(n.li,{children:"Solve only one problem at a time."}),"\n",(0,i.jsx)(n.li,{children:"Comment thoroughly."}),"\n",(0,i.jsx)(n.li,{children:"Do not open the PR from an organization repository."}),"\n",(0,i.jsx)(n.li,{children:'Keep "allows edit from maintainer" checked.'}),"\n",(0,i.jsx)(n.li,{children:"Use semantic line breaks for documentation."}),"\n",(0,i.jsx)(n.li,{children:"Ensure your PR is not a draft. We do not review drafts, but do answer questions and confer with developers on them as needed."}),"\n",(0,i.jsxs)(n.li,{children:["Ensure that the dependencies in the ",(0,i.jsx)(n.code,{children:"go.mod"})," file reference a tag. If referencing a tag is not possible, add a comment explaining why."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Pass the validation check."}),"\n",(0,i.jsx)(n.li,{children:"Pass all tests."}),"\n",(0,i.jsx)(n.li,{children:"Receive 2 approving reviews from maintainers."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"pull-request-review-cycle",children:"Pull Request Review Cycle"}),"\n",(0,i.jsxs)(n.p,{children:["Learn about our ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/contributors-guide/blob/master/issue_triage.md",children:"Triage Process"}),",\nin short, it looks like this:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We triage every new PR or comment before entering it into the review process.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"We ensure that all prerequisites for review have been met."}),"\n",(0,i.jsx)(n.li,{children:"We check to make sure the use case meets our needs."}),"\n",(0,i.jsx)(n.li,{children:"We assign reviewers."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Design Review.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"This takes longer than other parts of the process."}),"\n",(0,i.jsx)(n.li,{children:"We review that there are no obvious conflicts with our codebase."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Code Review.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"We review the code in-depth and run tests."}),"\n",(0,i.jsx)(n.li,{children:"We may ask for changes here."}),"\n",(0,i.jsx)(n.li,{children:"During code review, we ask that you be reasonably responsive,\nif a PR languishes in code review it is at risk of rejection,\nor we may take ownership of the PR and the contributor will become a co-author."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Merge.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Success!"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"!!! note"}),"\n",(0,i.jsx)(n.p,{children:"Occasionally, we may freeze our codebase when working towards a specific feature or goal that could impact other development.\nDuring this time, your pull request could remain unmerged while the release work is completed."}),"\n",(0,i.jsx)(n.h2,{id:"run-local-verifications",children:"Run Local Verifications"}),"\n",(0,i.jsx)(n.p,{children:"You must run these local verifications before you submit your pull request to predict the pass or failure of continuous integration.\nYour PR will not be reviewed until these are green on the CI."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"make generate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"make generate-crd"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"make test-gateway-api-conformance"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"make validate"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"make pull-images"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"make test"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"the-testing-and-merge-workflow",children:"The Testing and Merge Workflow"}),"\n",(0,i.jsxs)(n.p,{children:["Pull Requests are managed by the bot ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/lobicornis",children:"Myrmica Lobicornis"}),".\nThis bot is responsible for verifying GitHub Checks (CI, Tests, etc), mergability, and minimum reviews.\nIn addition, it rebases or merges with the base PR branch if needed.\nIt performs several other housekeeping items\nand you can read more about those on the ",(0,i.jsx)(n.a,{href:"https://github.com/Mesh/lobicornis",children:"README"})," for Lobicornis."]}),"\n",(0,i.jsxs)(n.p,{children:["The maintainer giving the final LGTM must add the ",(0,i.jsx)(n.code,{children:"status/3-needs-merge"})," label to trigger the merge bot."]}),"\n",(0,i.jsx)(n.p,{children:"By default, a squash-rebase merge will be carried out."}),"\n",(0,i.jsxs)(n.p,{children:["The status ",(0,i.jsx)(n.code,{children:"status/4-merge-in-progress"})," is only used by the bot."]}),"\n",(0,i.jsxs)(n.p,{children:["If the bot is not able to perform the merge, the label ",(0,i.jsx)(n.code,{children:"bot/need-human-merge"})," is added.\nIn such a situation, solve the conflicts/CI/... and then remove the label ",(0,i.jsx)(n.code,{children:"bot/need-human-merge"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["To prevent the bot from automatically merging a PR, add the label ",(0,i.jsx)(n.code,{children:"bot/no-merge"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["The label ",(0,i.jsx)(n.code,{children:"bot/light-review"})," decreases the number of required LGTM from 2 to 1."]}),"\n",(0,i.jsx)(n.p,{children:"This label can be used when:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Updating a dependency."}),"\n",(0,i.jsx)(n.li,{children:"Merging branches back into the next version branch."}),"\n",(0,i.jsx)(n.li,{children:"Submitting minor documentation changes."}),"\n",(0,i.jsx)(n.li,{children:"Submitting changelog PRs."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"why-was-my-pull-request-closed",children:"Why Was My Pull Request Closed?"}),"\n",(0,i.jsx)(n.p,{children:"Mesh Proxy is made by the community for the community,\nas such the goal is to engage the community to make Mesh the best reverse proxy available.\nPart of this goal is maintaining a lean codebase and ensuring code velocity.\nUnfortunately, this means that sometimes we will not be able to merge a pull request."}),"\n",(0,i.jsx)(n.p,{children:"Because we respect the work you did, you will always be told why we are closing your pull request.\nIf you do not agree with our decision, do not worry; closed pull requests are effortless to recreate,\nand little work is lost by closing a pull request that subsequently needs to be reopened."}),"\n",(0,i.jsx)(n.p,{children:"Your pull request might be closed if:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Your PR's design conflicts with our existing codebase in such a way that merging is not an option\nand the work needed to make your pull request usable is too high.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"To prevent this, make sure you created an issue first\nand think about including Mesh Proxy maintainers in your design phase to minimize conflicts."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Your PR is for an enhancement or feature that we will not use.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Please remember to create an issue for any pull request ",(0,i.jsx)(n.strong,{children:"before"})," you create a PR\nto ensure that your goal is something we can merge and that you have any design insight you might need from the team."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Your PR has been waiting for feedback from the contributor for over 90 days."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"why-is-my-pull-request-not-getting-reviewed",children:"Why is My Pull Request Not Getting Reviewed"}),"\n",(0,i.jsx)(n.p,{children:"A few factors affect how long your pull request might wait for review."}),"\n",(0,i.jsxs)(n.p,{children:["We must prioritize which PRs we focus on.\nOur first priority is PRs we have identified as having high community engagement and broad applicability.\nWe put our top priorities on our roadmap, and you can identify them by the ",(0,i.jsx)(n.code,{children:"contributor/wanted"})," tag.\nThese PRs will enter our review process the fastest."]}),"\n",(0,i.jsxs)(n.p,{children:["Our second priority is bug fixes.\nEspecially for bugs that have already been tagged with ",(0,i.jsx)(n.code,{children:"bug/confirmed"}),".\nThese reviews enter the process quickly."]}),"\n",(0,i.jsx)(n.p,{children:"If your PR does not meet the criteria above,\nit will take longer for us to review, as any PRs that do meet the criteria above will be prioritized."}),"\n",(0,i.jsx)(n.p,{children:"Additionally, during the last few weeks of a milestone, we stop reviewing PRs to reduce churn and stabilize.\nWe will resume after the release."}),"\n",(0,i.jsx)(n.p,{children:"The second major reason that we deprioritize your PR is that you are not following best practices."}),"\n",(0,i.jsx)(n.p,{children:"The most common failures to follow best practices are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"You did not create an issue for the PR you wish to make.\nIf you do not create an issue before submitting your PR,\nwe will not be able to answer any design questions and let you know how likely your PR is to be merged."}),"\n",(0,i.jsxs)(n.li,{children:["You created pull requests that are too large to review.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Break your pull requests up.\nIf you can extract whole ideas from your pull request and send those as pull requests of their own,\nyou should do that instead.\nIt is better to have many pull requests addressing one thing than one pull request addressing many things."}),"\n",(0,i.jsx)(n.li,{children:"Mesh Proxy is a fast-moving codebase \u2014 lock in your changes ASAP with your small pull request,\nand make merges be someone else's problem.\nWe want every pull request to be useful on its own,\nso use your best judgment on what should be a pull request vs. a commit."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["You did not comment well.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Comment everything."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Please remember that we are working internationally, cross-culturally, and with different use-cases.\nYour reviewer will not intuitively understand the problem the same way you do or solve it the same way you would.\nThis is why every change you make must be explained, and your strategy for coding must also be explained."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Your tests were inadequate or absent.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If you do not know how to test your PR, please ask!\nWe will be happy to help you or suggest appropriate test cases."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If you have already followed the best practices and your PR still has not received a response,\nhere are some things you can do to move the process along:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"If you have fixed all the issues from a review,\nremember to re-request a review (using the designated button) to let your reviewer know that you are ready.\nYou can choose to comment with the changes you made."}),"\n",(0,i.jsx)(n.li,{children:"Kindly comment on the pull request. Doing so will automatically give your PR visibility during the triage process."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For more information on best practices, try these links:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://chris.beams.io/posts/git-commit/",children:"How to Write a Git Commit Message - Chris Beams"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://git-scm.com/book/en/v2/Distributed-Git-Contributing-to-a-Project",children:"Distributed Git - Contributing to a Project (Commit Guidelines)"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://preslav.me/2015/02/21/what-s-with-the-50-72-rule/",children:"What\u2019s with the 50/72 rule? - Preslav Rachev"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html",children:"A Note About Git Commit Messages - Tim Pope"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"its-ok-to-push-back",children:"It's OK to Push Back"}),"\n",(0,i.jsx)(n.p,{children:"Sometimes reviewers make mistakes.\nIt is OK to push back on changes your reviewer requested.\nIf you have a good reason for doing something a certain way, you are absolutely allowed to debate the merits of a requested change.\nBoth the reviewer and reviewee should strive to discuss these issues in a polite and respectful manner."}),"\n",(0,i.jsx)(n.p,{children:"You might be overruled, but you might also prevail.\nWe are pretty reasonable people."}),"\n",(0,i.jsx)(n.p,{children:"Another phenomenon of open-source projects (where anyone can comment on any issue) is the dog-pile -\nyour pull request gets so many comments from so many people it becomes hard to follow.\nIn this situation, you can ask the primary reviewer (assignee) whether they want you to fork a new pull request\nto clear out all the comments.\nYou do not have to fix every issue raised by every person who feels like commenting,\nbut you should answer reasonable comments with an explanation."}),"\n",(0,i.jsx)(n.h2,{id:"common-sense-and-courtesy",children:"Common Sense and Courtesy"}),"\n",(0,i.jsx)(n.p,{children:"No document can take the place of common sense and good taste.\nUse your best judgment, while you put a bit of thought into how your work can be made easier to review.\nIf you do these things, your pull requests will get merged with less friction."})]})}function c(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var s=t(6540);const i={},o=s.createContext(i);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);