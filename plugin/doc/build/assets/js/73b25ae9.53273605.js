"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[7129],{2752:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"providers/redis","title":"Mesh Redis Documentation","description":"For configuration discovery in Mesh Proxy, you can store your configurations in Redis. Read the technical documentation.","source":"@site/docs/providers/redis.md","sourceDirName":"providers","slug":"/providers/redis","permalink":"/doc/docs/providers/redis","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/providers/redis.md","tags":[],"version":"current","frontMatter":{"title":"Mesh Redis Documentation","description":"For configuration discovery in Mesh Proxy, you can store your configurations in Redis. Read the technical documentation."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh Configuration Discovery Overview","permalink":"/doc/docs/providers/overview"},"next":{"title":"Mesh Docker Swarm Documentation","permalink":"/doc/docs/providers/swarm"}}');var i=s(4848),t=s(8453);const a={title:"Mesh Redis Documentation",description:"For configuration discovery in Mesh Proxy, you can store your configurations in Redis. Read the technical documentation."},d="Mesh & Redis",c={},l=[{value:"Routing Configuration",id:"routing-configuration",level:2},{value:"Provider Configuration",id:"provider-configuration",level:2},{value:"<code>endpoints</code>",id:"endpoints",level:3},{value:"<code>rootKey</code>",id:"rootkey",level:3},{value:"<code>username</code>",id:"username",level:3},{value:"<code>password</code>",id:"password",level:3},{value:"<code>db</code>",id:"db",level:3},{value:"<code>tls</code>",id:"tls",level:3},{value:"<code>ca</code>",id:"ca",level:4},{value:"<code>cert</code>",id:"cert",level:4},{value:"<code>key</code>",id:"key",level:4},{value:"<code>insecureSkipVerify</code>",id:"insecureskipverify",level:4},{value:"<code>sentinel</code>",id:"sentinel",level:3},{value:"<code>masterName</code>",id:"mastername",level:4},{value:"<code>username</code>",id:"username-1",level:4},{value:"<code>password</code>",id:"password-1",level:4},{value:"<code>latencyStrategy</code>",id:"latencystrategy",level:4},{value:"<code>randomStrategy</code>",id:"randomstrategy",level:4},{value:"<code>replicaStrategy</code>",id:"replicastrategy",level:4},{value:"<code>useDisconnectedReplicas</code>",id:"usedisconnectedreplicas",level:4}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mesh--redis",children:"Mesh & Redis"})}),"\n",(0,i.jsx)(n.p,{children:"A Story of KV store & Containers"}),"\n",(0,i.jsx)(n.p,{children:"Store your configuration in Redis and let Mesh do the rest!"}),"\n",(0,i.jsx)(n.p,{children:'!!! tip "Dynamic configuration updates"'}),"\n",(0,i.jsxs)(n.p,{children:["Dynamic configuration updates require Redis ",(0,i.jsx)(n.a,{href:"https://redis.io/docs/latest/develop/use/keyspace-notifications",children:"keyspace notifications"})," to be enabled.\nCloud-managed Redis services (e.g., GCP Memorystore, AWS ElastiCache) may disable this by default due to CPU performance issues.\nFor more information, see the ",(0,i.jsx)(n.a,{href:"https://redis.io/docs/latest/develop/use/keyspace-notifications/",children:"Redis"})," documentation or refer to your cloud provider's documentation for specific configuration steps."]}),"\n",(0,i.jsx)(n.h2,{id:"routing-configuration",children:"Routing Configuration"}),"\n",(0,i.jsxs)(n.p,{children:["See the dedicated section in ",(0,i.jsx)(n.a,{href:"/doc/docs/routing/providers/kv",children:"routing"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"provider-configuration",children:"Provider Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"endpoints",children:(0,i.jsx)(n.code,{children:"endpoints"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:'Required, Default="127.0.0.1:6379"'})}),"\n",(0,i.jsx)(n.p,{children:"Defines how to access Redis."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'providers:\n  redis:\n    endpoints:\n      - "127.0.0.1:6379"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis]\n  endpoints = ["127.0.0.1:6379"]\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.endpoints=127.0.0.1:6379\n"})}),"\n",(0,i.jsx)(n.h3,{id:"rootkey",children:(0,i.jsx)(n.code,{children:"rootKey"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:'Required, Default="Mesh"'})}),"\n",(0,i.jsx)(n.p,{children:"Defines the root key of the configuration."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'providers:\n  redis:\n    rootKey: "Mesh"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis]\n  rootKey = "Mesh"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.rootkey=Mesh\n"})}),"\n",(0,i.jsx)(n.h3,{id:"username",children:(0,i.jsx)(n.code,{children:"username"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:'Optional, Default=""'})}),"\n",(0,i.jsx)(n.p,{children:"Defines a username to connect with Redis."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'providers:\n  redis:\n    # ...\n    username: "foo"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis]\n  # ...\n  username = "foo"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.username=foo\n"})}),"\n",(0,i.jsx)(n.h3,{id:"password",children:(0,i.jsx)(n.code,{children:"password"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:'Optional, Default=""'})}),"\n",(0,i.jsx)(n.p,{children:"Defines a password to connect with Redis."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'providers:\n  redis:\n    # ...\n    password: "bar"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis]\n  # ...\n  password = "bar"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.password=foo\n"})}),"\n",(0,i.jsx)(n.h3,{id:"db",children:(0,i.jsx)(n.code,{children:"db"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional, Default=0"})}),"\n",(0,i.jsx)(n.p,{children:"Defines the database to be selected after connecting to the Redis."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    # ...\n    db: 0\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[providers.redis]\n  db = 0\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.db=0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tls",children:(0,i.jsx)(n.code,{children:"tls"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsx)(n.p,{children:"Defines the TLS configuration used for the secure connection to Redis."}),"\n",(0,i.jsx)(n.h4,{id:"ca",children:(0,i.jsx)(n.code,{children:"ca"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ca"})," is the path to the certificate authority used for the secure connection to Redis,\nit defaults to the system bundle."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    tls:\n      ca: path/to/ca.crt\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis.tls]\n  ca = "path/to/ca.crt"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.tls.ca=path/to/ca.crt\n"})}),"\n",(0,i.jsx)(n.h4,{id:"cert",children:(0,i.jsx)(n.code,{children:"cert"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"cert"})," is the path to the public certificate used for the secure connection to Redis.\nWhen using this option, setting the ",(0,i.jsx)(n.code,{children:"key"})," option is required."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    tls:\n      cert: path/to/foo.cert\n      key: path/to/foo.key\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis.tls]\n  cert = "path/to/foo.cert"\n  key = "path/to/foo.key"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.tls.cert=path/to/foo.cert\n--providers.redis.tls.key=path/to/foo.key\n"})}),"\n",(0,i.jsx)(n.h4,{id:"key",children:(0,i.jsx)(n.code,{children:"key"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"key"})," is the path to the private key used for the secure connection to Redis.\nWhen using this option, setting the ",(0,i.jsx)(n.code,{children:"cert"})," option is required."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    tls:\n      cert: path/to/foo.cert\n      key: path/to/foo.key\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis.tls]\n  cert = "path/to/foo.cert"\n  key = "path/to/foo.key"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.tls.cert=path/to/foo.cert\n--providers.redis.tls.key=path/to/foo.key\n"})}),"\n",(0,i.jsx)(n.h4,{id:"insecureskipverify",children:(0,i.jsx)(n.code,{children:"insecureSkipVerify"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional, Default=false"})}),"\n",(0,i.jsxs)(n.p,{children:["If ",(0,i.jsx)(n.code,{children:"insecureSkipVerify"})," is ",(0,i.jsx)(n.code,{children:"true"}),", the TLS connection to Redis accepts any certificate presented by the server regardless of the hostnames it covers."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    tls:\n      insecureSkipVerify: true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[providers.redis.tls]\n  insecureSkipVerify = true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.tls.insecureSkipVerify=true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sentinel",children:(0,i.jsx)(n.code,{children:"sentinel"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsx)(n.p,{children:"Defines the Sentinel configuration used to interact with Redis Sentinel."}),"\n",(0,i.jsx)(n.h4,{id:"mastername",children:(0,i.jsx)(n.code,{children:"masterName"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Required"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"masterName"})," is the name of the Sentinel master."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      masterName: my-master\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis.sentinel]\n  masterName = "my-master"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.masterName=my-master\n"})}),"\n",(0,i.jsx)(n.h4,{id:"username-1",children:(0,i.jsx)(n.code,{children:"username"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"username"})," is the username for Sentinel authentication."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      username: user\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis.sentinel]\n  username = "user"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.username=user\n"})}),"\n",(0,i.jsx)(n.h4,{id:"password-1",children:(0,i.jsx)(n.code,{children:"password"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"password"})," is the password for Sentinel authentication."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      password: password\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[providers.redis.sentinel]\n  password = "password"\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.password=password\n"})}),"\n",(0,i.jsx)(n.h4,{id:"latencystrategy",children:(0,i.jsx)(n.code,{children:"latencyStrategy"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional, Default=false"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"latencyStrategy"})," defines whether to route commands to the closest master or replica nodes\n(mutually exclusive with RandomStrategy and ReplicaStrategy)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      latencyStrategy: true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[providers.redis.sentinel]\nlatencyStrategy = true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.latencyStrategy=true\n"})}),"\n",(0,i.jsx)(n.h4,{id:"randomstrategy",children:(0,i.jsx)(n.code,{children:"randomStrategy"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional, Default=false"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"randomStrategy"})," defines whether to route commands randomly to master or replica nodes\n(mutually exclusive with LatencyStrategy and ReplicaStrategy)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      randomStrategy: true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[providers.redis.sentinel]\nrandomStrategy = true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.randomStrategy=true\n"})}),"\n",(0,i.jsx)(n.h4,{id:"replicastrategy",children:(0,i.jsx)(n.code,{children:"replicaStrategy"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional, Default=false"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"replicaStrategy"})," Defines whether to route all commands to replica nodes\n(mutually exclusive with LatencyStrategy and RandomStrategy)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      replicaStrategy: true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[providers.redis.sentinel]\nreplicaStrategy = true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.replicaStrategy=true\n"})}),"\n",(0,i.jsx)(n.h4,{id:"usedisconnectedreplicas",children:(0,i.jsx)(n.code,{children:"useDisconnectedReplicas"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Optional, Default=false"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"useDisconnectedReplicas"})," defines whether to use replicas disconnected with master when cannot get connected replicas."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"providers:\n  redis:\n    sentinel:\n      useDisconnectedReplicas: true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[providers.redis.sentinel]\nuseDisconnectedReplicas = true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",metastring:'tab="CLI"',children:"--providers.redis.sentinel.useDisconnectedReplicas=true\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var r=s(6540);const i={},t=r.createContext(i);function a(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);