"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[6498],{7698:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"reference/install-configuration/providers/overview","title":"Mesh Providers Documentation","description":"Learn about Providers in Mesh Proxy.","source":"@site/docs/reference/install-configuration/providers/overview.md","sourceDirName":"reference/install-configuration/providers","slug":"/reference/install-configuration/providers/overview","permalink":"/doc/docs/reference/install-configuration/providers/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/reference/install-configuration/providers/overview.md","tags":[],"version":"current","frontMatter":{"title":"Mesh Providers Documentation","description":"Learn about Providers in Mesh Proxy."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh HTTP Documentation","permalink":"/doc/docs/reference/install-configuration/providers/others/http"},"next":{"title":"Mesh Docker Swarm Documentation","permalink":"/doc/docs/reference/install-configuration/providers/swarm"}}');var i=n(4848),o=n(8453);const d={title:"Mesh Providers Documentation",description:"Learn about Providers in Mesh Proxy."},t="Overview",c={},a=[{value:"Provider Categories",id:"provider-categories",level:2},{value:"Provider Namespace",id:"provider-namespace",level:2},{value:"Supported Providers",id:"supported-providers",level:2},{value:"Referencing a Mesh Dynamic Configuration Object from Another Provider",id:"referencing-a-mesh-dynamic-configuration-object-from-another-provider",level:2},{value:"<code>exposedByDefault</code> and <code>Mesh.enable</code>",id:"exposedbydefault-and-meshenable",level:3},{value:"Constraints",id:"constraints",level:3}];function l(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"overview",children:"Overview"})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.em,{children:"Providers"})," are infrastructure components, whether orchestrators, container engines, cloud providers, or key-value stores.\nThe idea is that Mesh queries the provider APIs in order to find relevant information about routing,\nand when Mesh detects a change, it dynamically updates the routes."]}),"\n",(0,i.jsx)(r.h2,{id:"provider-categories",children:"Provider Categories"}),"\n",(0,i.jsx)(r.p,{children:"While each provider is different, you can think of each as belonging to one of four categories:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"Label-based: each deployed container has a set of labels attached to it"}),"\n",(0,i.jsx)(r.li,{children:"Key-Value-based: each deployed container updates a key-value store with relevant information"}),"\n",(0,i.jsx)(r.li,{children:"Annotation-based: a separate object, with annotations, defines the characteristics of the container"}),"\n",(0,i.jsx)(r.li,{children:"File-based: uses files to define configuration"}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"provider-namespace",children:"Provider Namespace"}),"\n",(0,i.jsx)(r.p,{children:"When you declare certain objects in the Mesh dynamic configuration,\nsuch as middleware, services, TLS options or server transports, they reside in their provider's namespace.\nFor example, if you declare a middleware using a Docker label, it resides in the Docker provider namespace."}),"\n",(0,i.jsxs)(r.p,{children:["If you use multiple providers and wish to reference such an object declared in another provider\n(e.g. referencing a cross-provider object like middleware), then the object name should be suffixed by the ",(0,i.jsx)(r.code,{children:"@"}),"\nseparator, and the provider name."]}),"\n",(0,i.jsxs)(r.p,{children:["For the list of the providers names, see the ",(0,i.jsx)(r.a,{href:"#supported-providers",children:"supported providers"})," table below."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-text",children:"<resource-name>@<provider-name>\n"})}),"\n",(0,i.jsx)(r.p,{children:'!!! important "Kubernetes Namespace vs Mesh Namespace"'}),"\n",(0,i.jsxs)(r.p,{children:["As Kubernetes also has its own notion of namespace,\none should not confuse the ",(0,i.jsx)(r.em,{children:"provider namespace"})," with the ",(0,i.jsx)(r.em,{children:"Kubernetes Namespace"})," of a resource when in the context of cross-provider usage."]}),"\n",(0,i.jsx)(r.p,{children:"In this case, since the definition of a Mesh dynamic configuration object is not in Kubernetes,\nspecifying a Kubernetes Namespace when referring to the resource does not make any sense."}),"\n",(0,i.jsxs)(r.p,{children:["On the other hand, if you were to declare a middleware as a Custom Resource in Kubernetes and use the non-CRD Ingress objects,\nyou would have to add the Kubernetes Namespace of the middleware to the annotation like this ",(0,i.jsx)(r.code,{children:"<middleware-namespace>-<middleware-name>@kubernetescrd"}),"."]}),"\n",(0,i.jsx)(r.h2,{id:"supported-providers",children:"Supported Providers"}),"\n",(0,i.jsx)(r.p,{children:"Below is the list of the currently supported providers in Mesh."}),"\n",(0,i.jsxs)(r.table,{children:[(0,i.jsx)(r.thead,{children:(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.th,{children:"Provider"}),(0,i.jsx)(r.th,{children:"Type"}),(0,i.jsx)(r.th,{children:"Configuration Type"}),(0,i.jsx)(r.th,{children:"Provider Name"})]})}),(0,i.jsxs)(r.tbody,{children:[(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/docker",children:"Docker"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Label"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"docker"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/swarm",children:"Docker Swarm"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Label"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"swarm"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/kubernetes/kubernetes-crd",children:"Kubernetes IngressRoute"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Custom Resource"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"kubernetescrd"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/kubernetes/kubernetes-ingress",children:"Kubernetes Ingress"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Ingress"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"kubernetes"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/kubernetes/kubernetes-gateway",children:"Kubernetes Gateway API"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Gateway API Resource"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"kubernetesgateway"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/consul-catalog",children:"Consul Catalog"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Label"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"consulcatalog"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/nomad",children:"Nomad"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Label"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"nomad"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/others/ecs",children:"ECS"})}),(0,i.jsx)(r.td,{children:"Orchestrator"}),(0,i.jsx)(r.td,{children:"Label"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"ecs"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/others/file",children:"File"})}),(0,i.jsx)(r.td,{children:"Manual"}),(0,i.jsx)(r.td,{children:"YAML/TOML format"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"file"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/consul",children:"Consul"})}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"consul"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/kv/etcd",children:"Etcd"})}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"etcd"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/kv/zk",children:"ZooKeeper"})}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"zookeeper"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/kv/redis",children:"Redis"})}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:"KV"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"redis"})})]}),(0,i.jsxs)(r.tr,{children:[(0,i.jsx)(r.td,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/others/http",children:"HTTP"})}),(0,i.jsx)(r.td,{children:"Manual"}),(0,i.jsx)(r.td,{children:"JSON/YAML format"}),(0,i.jsx)(r.td,{children:(0,i.jsx)(r.code,{children:"http"})})]})]})]}),"\n",(0,i.jsx)(r.p,{children:'!!! info "More Providers"'}),"\n",(0,i.jsxs)(r.p,{children:["The current version of Mesh does not yet support every provider that Mesh v2.11 did.\nSee the ",(0,i.jsx)(r.a,{href:"https://doc.Mesh.io/Mesh/v2.11/",children:"previous version (v2.11)"})," for more information."]}),"\n",(0,i.jsx)(r.h2,{id:"referencing-a-mesh-dynamic-configuration-object-from-another-provider",children:"Referencing a Mesh Dynamic Configuration Object from Another Provider"}),"\n",(0,i.jsx)(r.p,{children:"Declaring the add-foo-prefix in the file provider."}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'http:\n  middlewares:\n    add-foo-prefix:\n      addPrefix:\n        prefix: "/foo"\n'})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[http.middlewares]\n  [http.middlewares.add-foo-prefix.addPrefix]\n    prefix = "/foo"\n'})}),"\n",(0,i.jsx)(r.p,{children:"Using the add-foo-prefix middleware from other providers:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'your-container:\n  image: your-docker-image\n\n  labels:\n    # Attach add-foo-prefix@file middleware (declared in file)\n    - "Mesh.http.routers.my-container.middlewares=add-foo-prefix@file"\n'})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",metastring:'tab="IngressRoute"',children:"apiVersion: Mesh.io/v1alpha1\nkind: IngressRoute\nmetadata:\n  name: ingressroutestripprefix\n\nspec:\n  entryPoints:\n    - web\n  routes:\n    - match: Host(`example.com`)\n      kind: Rule\n      services:\n        - name: whoami\n          port: 80\n      middlewares:\n        - name: add-foo-prefix@file\n        # namespace: bar\n        # A namespace specification such as above is ignored\n        # when the cross-provider syntax is used.\n"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-yaml",metastring:'tab="Ingress"',children:'apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: ingress\n  namespace: appspace\n  annotations:\n    "Mesh.ingress.kubernetes.io/router.middlewares": add-foo-prefix@file\nspec:\n'})}),"\n",(0,i.jsx)(r.p,{children:"By default, Mesh creates routes for all detected containers."}),"\n",(0,i.jsx)(r.p,{children:"If you want to limit the scope of the Mesh service discovery,\ni.e. disallow route creation for some containers,\nyou can do so in two different ways:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:["the generic configuration option ",(0,i.jsx)(r.code,{children:"exposedByDefault"}),","]}),"\n",(0,i.jsx)(r.li,{children:"a finer granularity mechanism based on constraints."}),"\n"]}),"\n",(0,i.jsxs)(r.h3,{id:"exposedbydefault-and-meshenable",children:[(0,i.jsx)(r.code,{children:"exposedByDefault"})," and ",(0,i.jsx)(r.code,{children:"Mesh.enable"})]}),"\n",(0,i.jsx)(r.p,{children:"List of providers that support these features:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/docker#configuration-options",children:"Docker"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/others/ecs#configuration-options",children:"ECS"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/consul-catalog#configuration-options",children:"Consul Catalog"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/nomad#configuration-options",children:"Nomad"})}),"\n"]}),"\n",(0,i.jsx)(r.h3,{id:"constraints",children:"Constraints"}),"\n",(0,i.jsx)(r.p,{children:"List of providers that support constraints:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/docker#constraints",children:"Docker"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/others/ecs#constraints",children:"ECS"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/consul-catalog#constraints",children:"Consul Catalog"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/providers/hashicorp/nomad#constraints",children:"Nomad"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>d,x:()=>t});var s=n(6540);const i={},o=s.createContext(i);function d(e){const r=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),s.createElement(o.Provider,{value:r},e.children)}}}]);