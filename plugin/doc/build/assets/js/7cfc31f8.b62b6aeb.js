"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[4586],{6183:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/inflightreq-937893cc249e4619f9c1ad0851a1137b.png"},8453:(e,t,n)=>{n.d(t,{R:()=>d,x:()=>l});var i=n(6540);const r={},s=i.createContext(r);function d(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(s.Provider,{value:t},e.children)}},8765:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>l,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"middlewares/http/inflightreq","title":"Mesh InFlightReq Documentation","description":"Mesh Proxy\'s HTTP middleware lets you limit the number of simultaneous in-flight requests. Read the technical documentation.","source":"@site/docs/middlewares/http/inflightreq.md","sourceDirName":"middlewares/http","slug":"/middlewares/http/inflightreq","permalink":"/doc/docs/middlewares/http/inflightreq","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/middlewares/http/inflightreq.md","tags":[],"version":"current","frontMatter":{"title":"Mesh InFlightReq Documentation","description":"Mesh Proxy\'s HTTP middleware lets you limit the number of simultaneous in-flight requests. Read the technical documentation."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh Headers Documentation","permalink":"/doc/docs/middlewares/http/headers"},"next":{"title":"Mesh HTTP Middlewares IPAllowList","permalink":"/doc/docs/middlewares/http/ipallowlist"}}');var r=n(4848),s=n(8453);const d={title:"Mesh InFlightReq Documentation",description:"Mesh Proxy's HTTP middleware lets you limit the number of simultaneous in-flight requests. Read the technical documentation."},l="InFlightReq",a={},c=[{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"<code>amount</code>",id:"amount",level:3},{value:"<code>sourceCriterion</code>",id:"sourcecriterion",level:3},{value:"<code>sourceCriterion.ipStrategy</code>",id:"sourcecriterionipstrategy",level:4},{value:"<code>ipStrategy.depth</code>",id:"ipstrategydepth",level:5},{value:"<code>ipStrategy.excludedIPs</code>",id:"ipstrategyexcludedips",level:5},{value:"<code>ipStrategy.ipv6Subnet</code>",id:"ipstrategyipv6subnet",level:5},{value:"<code>sourceCriterion.requestHeaderName</code>",id:"sourcecriterionrequestheadername",level:4},{value:"<code>sourceCriterion.requestHost</code>",id:"sourcecriterionrequesthost",level:4}];function h(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"inflightreq",children:"InFlightReq"})}),"\n",(0,r.jsx)(t.p,{children:"Limiting the Number of Simultaneous In-Flight Requests"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"InFlightReq",src:n(6183).A+"",width:"2420",height:"419"})}),"\n",(0,r.jsx)(t.p,{children:"To proactively prevent services from being overwhelmed with high load, the number of allowed simultaneous in-flight requests can be limited."}),"\n",(0,r.jsx)(t.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.amount=10"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n    amount: 10\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'# Limiting to 10 simultaneous connections\n- "Mesh.http.middlewares.test-inflightreq.inflightreq.amount=10"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"# Limiting to 10 simultaneous connections\nhttp:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        amount: 10\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"# Limiting to 10 simultaneous connections\n[http.middlewares]\n  [http.middlewares.test-inflightreq.inFlightReq]\n    amount = 10\n"})}),"\n",(0,r.jsx)(t.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,r.jsx)(t.h3,{id:"amount",children:(0,r.jsx)(t.code,{children:"amount"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"amount"})," option defines the maximum amount of allowed simultaneous in-flight request.\nThe middleware responds with ",(0,r.jsx)(t.code,{children:"HTTP 429 Too Many Requests"})," if there are already ",(0,r.jsx)(t.code,{children:"amount"})," requests in progress (based on the same ",(0,r.jsx)(t.code,{children:"sourceCriterion"})," strategy)."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.amount=10"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n    amount: 10\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'# Limiting to 10 simultaneous connections\n- "Mesh.http.middlewares.test-inflightreq.inflightreq.amount=10"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"# Limiting to 10 simultaneous connections\nhttp:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        amount: 10\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"# Limiting to 10 simultaneous connections\n[http.middlewares]\n  [http.middlewares.test-inflightreq.inFlightReq]\n    amount = 10\n"})}),"\n",(0,r.jsx)(t.h3,{id:"sourcecriterion",children:(0,r.jsx)(t.code,{children:"sourceCriterion"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"sourceCriterion"})," option defines what criterion is used to group requests as originating from a common source.\nIf several strategies are defined at the same time, an error will be raised.\nIf none are set, the default is to use the ",(0,r.jsx)(t.code,{children:"requestHost"}),"."]}),"\n",(0,r.jsx)(t.h4,{id:"sourcecriterionipstrategy",children:(0,r.jsx)(t.code,{children:"sourceCriterion.ipStrategy"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"ipStrategy"})," option defines three parameters that configures how Mesh determines the client IP: ",(0,r.jsx)(t.code,{children:"depth"}),", ",(0,r.jsx)(t.code,{children:"excludedIPs"})," and ",(0,r.jsx)(t.code,{children:"ipv6Subnet"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:['!!! important "As a middleware, InFlightReq happens before the actual proxying to the backend takes place. In addition, the previous network hop only gets appended to ',(0,r.jsx)(t.code,{children:"X-Forwarded-For"})," during the last stages of proxying, i.e. after it has already passed through the middleware. Therefore, during InFlightReq, as the previous network hop is not yet present in ",(0,r.jsx)(t.code,{children:"X-Forwarded-For"}),', it cannot be used and/or relied upon."']}),"\n",(0,r.jsx)(t.h5,{id:"ipstrategydepth",children:(0,r.jsx)(t.code,{children:"ipStrategy.depth"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"depth"})," option tells Mesh to use the ",(0,r.jsx)(t.code,{children:"X-Forwarded-For"})," header and select the IP located at the ",(0,r.jsx)(t.code,{children:"depth"})," position (starting from the right)."]}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["If ",(0,r.jsx)(t.code,{children:"depth"})," is greater than the total number of IPs in ",(0,r.jsx)(t.code,{children:"X-Forwarded-For"}),", then the client IP is empty."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"depth"})," is ignored if its value is less than or equal to 0."]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["If ",(0,r.jsx)(t.code,{children:"ipStrategy.ipv6Subnet"})," is provided and the selected IP is IPv6, the IP is transformed into the first IP of the subnet it belongs to.",(0,r.jsx)(t.br,{}),"\n","See ",(0,r.jsx)(t.a,{href:"#ipstrategyipv6subnet",children:"ipStrategy.ipv6Subnet"})," for more details."]}),"\n",(0,r.jsx)(t.p,{children:'!!! example "Example of Depth & X-Forwarded-For"'}),"\n",(0,r.jsxs)(t.p,{children:["If ",(0,r.jsx)(t.code,{children:"depth"})," is set to 2, and the request ",(0,r.jsx)(t.code,{children:"X-Forwarded-For"})," header is ",(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'}),' then the "real" client IP is ',(0,r.jsx)(t.code,{children:'"10.0.0.1"'})," (at depth 4) but the IP used as the criterion is ",(0,r.jsx)(t.code,{children:'"12.0.0.1"'})," (",(0,r.jsx)(t.code,{children:"depth=2"}),")."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"X-Forwarded-For"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"depth"})}),(0,r.jsx)(t.th,{children:"clientIP"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"1"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"13.0.0.1"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"3"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"11.0.0.1"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"5"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'""'})})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.ipstrategy.depth=2"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n    sourceCriterion:\n      ipStrategy:\n        depth: 2\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.ipstrategy.depth=2"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"http:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        sourceCriterion:\n          ipStrategy:\n            depth: 2\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[http.middlewares]\n  [http.middlewares.test-inflightreq.inflightreq]\n    [http.middlewares.test-inflightreq.inFlightReq.sourceCriterion.ipStrategy]\n      depth = 2\n"})}),"\n",(0,r.jsx)(t.h5,{id:"ipstrategyexcludedips",children:(0,r.jsx)(t.code,{children:"ipStrategy.excludedIPs"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"excludedIPs"})," configures Mesh to scan the ",(0,r.jsx)(t.code,{children:"X-Forwarded-For"})," header and select the first IP not in the list."]}),"\n",(0,r.jsxs)(t.p,{children:['!!! important "If ',(0,r.jsx)(t.code,{children:"depth"})," is specified, ",(0,r.jsx)(t.code,{children:"excludedIPs"}),' is ignored."']}),"\n",(0,r.jsx)(t.p,{children:'!!! example "Example of ExcludedIPs & X-Forwarded-For"'}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"X-Forwarded-For"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"excludedIPs"})}),(0,r.jsx)(t.th,{children:"clientIP"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"11.0.0.1"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"15.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"12.0.0.1"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"12.0.0.1"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1,12.0.0.1,13.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"15.0.0.1,16.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"13.0.0.1"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"10.0.0.1,11.0.0.1"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'""'})})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.ipstrategy.excludedips=127.0.0.1/32, 192.168.1.7"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n    sourceCriterion:\n      ipStrategy:\n        excludedIPs:\n        - 127.0.0.1/32\n        - 192.168.1.7\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.ipstrategy.excludedips=127.0.0.1/32, 192.168.1.7"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'http:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        sourceCriterion:\n          ipStrategy:\n            excludedIPs:\n              - "127.0.0.1/32"\n              - "192.168.1.7"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[http.middlewares]\n  [http.middlewares.test-inflightreq.inflightreq]\n    [http.middlewares.test-inflightreq.inFlightReq.sourceCriterion.ipStrategy]\n      excludedIPs = ["127.0.0.1/32", "192.168.1.7"]\n'})}),"\n",(0,r.jsx)(t.h5,{id:"ipstrategyipv6subnet",children:(0,r.jsx)(t.code,{children:"ipStrategy.ipv6Subnet"})}),"\n",(0,r.jsxs)(t.p,{children:["This strategy applies to ",(0,r.jsx)(t.code,{children:"Depth"})," and ",(0,r.jsx)(t.code,{children:"RemoteAddr"})," strategy only.\nIf ",(0,r.jsx)(t.code,{children:"ipv6Subnet"})," is provided and the selected IP is IPv6, the IP is transformed into the first IP of the subnet it belongs to."]}),"\n",(0,r.jsx)(t.p,{children:"This is useful for grouping IPv6 addresses into subnets to prevent bypassing this middleware by obtaining a new IPv6."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"ipv6Subnet"})," is ignored if its value is outside of 0-128 interval"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:'!!! example "Example of ipv6Subnet"'}),"\n",(0,r.jsxs)(t.p,{children:["If ",(0,r.jsx)(t.code,{children:"ipv6Subnet"})," is provided, the IP is transformed in the following way."]}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"IP"})}),(0,r.jsx)(t.th,{children:(0,r.jsx)(t.code,{children:"ipv6Subnet"})}),(0,r.jsx)(t.th,{children:"clientIP"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"::abcd:1111:2222:3333"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"64"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"::0:0:0:0"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"::abcd:1111:2222:3333"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"80"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"::abcd:0:0:0:0"'})})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"::abcd:1111:2222:3333"'})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:"96"})}),(0,r.jsx)(t.td,{children:(0,r.jsx)(t.code,{children:'"::abcd:1111:0:0:0"'})})]})]})]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.ipstrategy.ipv6Subnet=64"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n    sourceCriterion:\n      ipStrategy:\n        ipv6Subnet: 64\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.ipstrategy.ipv6Subnet=64"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"http:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        sourceCriterion:\n          ipStrategy:\n            ipv6Subnet: 64\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[http.middlewares]\n  [http.middlewares.test-inflightreq.inflightreq]\n    [http.middlewares.test-inflightreq.inFlightReq.sourceCriterion.ipStrategy]\n      ipv6Subnet = 64\n"})}),"\n",(0,r.jsx)(t.h4,{id:"sourcecriterionrequestheadername",children:(0,r.jsx)(t.code,{children:"sourceCriterion.requestHeaderName"})}),"\n",(0,r.jsx)(t.p,{children:"Name of the header used to group incoming requests."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.requestheadername=username"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n\tsourceCriterion:\n      requestHeaderName: username\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.requestheadername=username"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"http:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        sourceCriterion:\n          requestHeaderName: username\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[http.middlewares]\n  [http.middlewares.test-inflightreq.inflightreq]\n    [http.middlewares.test-inflightreq.inFlightReq.sourceCriterion]\n      requestHeaderName = "username"\n'})}),"\n",(0,r.jsx)(t.h4,{id:"sourcecriterionrequesthost",children:(0,r.jsx)(t.code,{children:"sourceCriterion.requestHost"})}),"\n",(0,r.jsx)(t.p,{children:"Whether to consider the request host as the source."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.requesthost=true"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-inflightreq\nspec:\n  inFlightReq:\n    sourceCriterion:\n      requestHost: true\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.test-inflightreq.inflightreq.sourcecriterion.requesthost=true"\n'})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"http:\n  middlewares:\n    test-inflightreq:\n      inFlightReq:\n        sourceCriterion:\n          requestHost: true\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[http.middlewares]\n  [http.middlewares.test-inflightreq.inflightreq]\n    [http.middlewares.test-inflightreq.inFlightReq.sourceCriterion]\n      requestHost = true\n"})})]})}function o(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);