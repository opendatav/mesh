"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[243],{2822:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"observability/metrics/overview","title":"Mesh Metrics Overview","description":"Mesh Proxy supports these metrics backend systems: Datadog, InfluxDB 2.X, Prometheus, and StatsD. Read the full documentation to get started.","source":"@site/docs/observability/metrics/overview.md","sourceDirName":"observability/metrics","slug":"/observability/metrics/overview","permalink":"/doc/docs/observability/metrics/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/observability/metrics/overview.md","tags":[],"version":"current","frontMatter":{"title":"Mesh Metrics Overview","description":"Mesh Proxy supports these metrics backend systems: Datadog, InfluxDB 2.X, Prometheus, and StatsD. Read the full documentation to get started."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh OpenTelemetry Documentation","permalink":"/doc/docs/observability/metrics/opentelemetry"},"next":{"title":"Mesh Prometheus Documentation","permalink":"/doc/docs/observability/metrics/prometheus"}}');var n=t(4848),d=t(8453);const i={title:"Mesh Metrics Overview",description:"Mesh Proxy supports these metrics backend systems: Datadog, InfluxDB 2.X, Prometheus, and StatsD. Read the full documentation to get started."},c="Metrics",l={},o=[{value:"Common Options",id:"common-options",level:2},{value:"<code>addInternals</code>",id:"addinternals",level:3},{value:"Global Metrics",id:"global-metrics",level:2},{value:"Labels",id:"labels",level:3},{value:"OpenTelemetry Semantic Conventions",id:"opentelemetry-semantic-conventions",level:2},{value:"HTTP Server",id:"http-server",level:3},{value:"Labels",id:"labels-1",level:4},{value:"HTTP Client",id:"http-client",level:3},{value:"Labels",id:"labels-2",level:4},{value:"HTTP Metrics",id:"http-metrics",level:2},{value:"EntryPoint Metrics",id:"entrypoint-metrics",level:3},{value:"Router Metrics",id:"router-metrics",level:3},{value:"Service Metrics",id:"service-metrics",level:3},{value:"Labels",id:"labels-3",level:3}];function h(e){const s={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"metrics",children:"Metrics"})}),"\n",(0,n.jsxs)(s.p,{children:["Mesh provides metrics in the ",(0,n.jsx)(s.a,{href:"/doc/docs/observability/metrics/opentelemetry",children:"OpenTelemetry"})," format as well as the following vendor specific backends:"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/doc/docs/observability/metrics/datadog",children:"Datadog"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/doc/docs/observability/metrics/influxdb2",children:"InfluxDB2"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/doc/docs/observability/metrics/prometheus",children:"Prometheus"})}),"\n",(0,n.jsx)(s.li,{children:(0,n.jsx)(s.a,{href:"/doc/docs/observability/metrics/statsd",children:"StatsD"})}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Mesh Proxy hosts an official Grafana dashboard for both ",(0,n.jsx)(s.a,{href:"https://grafana.com/grafana/dashboards/17346",children:"on-premises"}),"\nand ",(0,n.jsx)(s.a,{href:"https://grafana.com/grafana/dashboards/17347",children:"Kubernetes"})," deployments."]}),"\n",(0,n.jsx)(s.h2,{id:"common-options",children:"Common Options"}),"\n",(0,n.jsx)(s.h3,{id:"addinternals",children:(0,n.jsx)(s.code,{children:"addInternals"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:'Optional, Default="false"'})}),"\n",(0,n.jsxs)(s.p,{children:["Enables metrics for internal resources (e.g.: ",(0,n.jsx)(s.code,{children:"ping@internals"}),")."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"metrics:\n  addInternals: true\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[metrics]\naddInternals = true\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",metastring:'tab="CLI"',children:"--metrics.addinternals\n"})}),"\n",(0,n.jsx)(s.h2,{id:"global-metrics",children:"Global Metrics"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Metric"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:(0,n.jsx)(s.a,{href:"#labels",children:"Labels"})}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Config reload total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"The total count of configuration reloads."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Config reload last success"}),(0,n.jsx)(s.td,{children:"Gauge"}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"The timestamp of the last configuration reload success."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Open connections"}),(0,n.jsx)(s.td,{children:"Gauge"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"entrypoint"}),", ",(0,n.jsx)(s.code,{children:"protocol"})]}),(0,n.jsx)(s.td,{children:"The current count of open connections, by entrypoint and protocol."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"TLS certificates not after"}),(0,n.jsx)(s.td,{children:"Gauge"}),(0,n.jsx)(s.td,{}),(0,n.jsx)(s.td,{children:"The expiration date of certificates."})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-opentelemetry",metastring:'tab="OpenTelemetry"',children:"Mesh_config_reloads_total\nMesh_config_last_reload_success\nMesh_open_connections\nMesh_tls_certs_not_after\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-prom",metastring:'tab="Prometheus"',children:"Mesh_config_reloads_total\nMesh_config_last_reload_success\nMesh_open_connections\nMesh_tls_certs_not_after\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-dd",metastring:'tab="Datadog"',children:"config.reload.total\nconfig.reload.lastSuccessTimestamp\nopen.connections\ntls.certs.notAfterTimestamp\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-influxdb",metastring:'tab="InfluxDB2"',children:"Mesh.config.reload.total\nMesh.config.reload.lastSuccessTimestamp\nMesh.open.connections\nMesh.tls.certs.notAfterTimestamp\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-statsd",metastring:'tab="StatsD"',children:'# Default prefix: "Mesh"\n{prefix}.config.reload.total\n{prefix}.config.reload.lastSuccessTimestamp\n{prefix}.open.connections\n{prefix}.tls.certs.notAfterTimestamp\n'})}),"\n",(0,n.jsx)(s.h3,{id:"labels",children:"Labels"}),"\n",(0,n.jsx)(s.p,{children:"Here is a comprehensive list of labels that are provided by the global metrics:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Label"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"example"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"entrypoint"})}),(0,n.jsx)(s.td,{children:"Entrypoint that handled the connection"}),(0,n.jsx)(s.td,{children:'"example_entrypoint"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"protocol"})}),(0,n.jsx)(s.td,{children:"Connection protocol"}),(0,n.jsx)(s.td,{children:'"TCP"'})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"opentelemetry-semantic-conventions",children:"OpenTelemetry Semantic Conventions"}),"\n",(0,n.jsxs)(s.p,{children:["Mesh Proxy follows ",(0,n.jsx)(s.a,{href:"https://github.com/open-telemetry/semantic-conventions/blob/v1.23.1/docs/http/http-metrics.md",children:"official OpenTelemetry semantic conventions v1.23.1"}),"."]}),"\n",(0,n.jsx)(s.h3,{id:"http-server",children:"HTTP Server"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Metric"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:(0,n.jsx)(s.a,{href:"#labels",children:"Labels"})}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"http.server.request.duration"}),(0,n.jsx)(s.td,{children:"Histogram"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"error.type"}),", ",(0,n.jsx)(s.code,{children:"http.request.method"}),", ",(0,n.jsx)(s.code,{children:"http.response.status_code"}),", ",(0,n.jsx)(s.code,{children:"network.protocol.name"}),", ",(0,n.jsx)(s.code,{children:"server.address"}),", ",(0,n.jsx)(s.code,{children:"server.port"}),", ",(0,n.jsx)(s.code,{children:"url.scheme"})]}),(0,n.jsx)(s.td,{children:"Duration of HTTP server requests"})]})})]}),"\n",(0,n.jsx)(s.h4,{id:"labels-1",children:"Labels"}),"\n",(0,n.jsx)(s.p,{children:"Here is a comprehensive list of labels that are provided by the metrics:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Label"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"example"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"error.type"})}),(0,n.jsx)(s.td,{children:"Describes a class of error the operation ended with"}),(0,n.jsx)(s.td,{children:'"500"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"http.request.method"})}),(0,n.jsx)(s.td,{children:"HTTP request method"}),(0,n.jsx)(s.td,{children:'"GET"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"http.response.status_code"})}),(0,n.jsx)(s.td,{children:"HTTP response status code"}),(0,n.jsx)(s.td,{children:'"200"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network.protocol.name"})}),(0,n.jsx)(s.td,{children:"OSI application layer or non-OSI equivalent"}),(0,n.jsx)(s.td,{children:'"http/1.1"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network.protocol.version"})}),(0,n.jsxs)(s.td,{children:["Version of the protocol specified in ",(0,n.jsx)(s.code,{children:"network.protocol.name"})]}),(0,n.jsx)(s.td,{children:'"1.1"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"server.address"})}),(0,n.jsx)(s.td,{children:"Name of the local HTTP server that received the request"}),(0,n.jsx)(s.td,{children:'"example.com"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"server.port"})}),(0,n.jsx)(s.td,{children:"Port of the local HTTP server that received the request"}),(0,n.jsx)(s.td,{children:'"80"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"url.scheme"})}),(0,n.jsx)(s.td,{children:"The URI scheme component identifying the used protocol"}),(0,n.jsx)(s.td,{children:'"http"'})]})]})]}),"\n",(0,n.jsx)(s.h3,{id:"http-client",children:"HTTP Client"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Metric"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:(0,n.jsx)(s.a,{href:"#labels",children:"Labels"})}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsx)(s.tbody,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"http.client.request.duration"}),(0,n.jsx)(s.td,{children:"Histogram"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"error.type"}),", ",(0,n.jsx)(s.code,{children:"http.request.method"}),", ",(0,n.jsx)(s.code,{children:"http.response.status_code"}),", ",(0,n.jsx)(s.code,{children:"network.protocol.name"}),", ",(0,n.jsx)(s.code,{children:"server.address"}),", ",(0,n.jsx)(s.code,{children:"server.port"}),", ",(0,n.jsx)(s.code,{children:"url.scheme"})]}),(0,n.jsx)(s.td,{children:"Duration of HTTP client requests"})]})})]}),"\n",(0,n.jsx)(s.h4,{id:"labels-2",children:"Labels"}),"\n",(0,n.jsx)(s.p,{children:"Here is a comprehensive list of labels that are provided by the metrics:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Label"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"example"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"error.type"})}),(0,n.jsx)(s.td,{children:"Describes a class of error the operation ended with"}),(0,n.jsx)(s.td,{children:'"500"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"http.request.method"})}),(0,n.jsx)(s.td,{children:"HTTP request method"}),(0,n.jsx)(s.td,{children:'"GET"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"http.response.status_code"})}),(0,n.jsx)(s.td,{children:"HTTP response status code"}),(0,n.jsx)(s.td,{children:'"200"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network.protocol.name"})}),(0,n.jsx)(s.td,{children:"OSI application layer or non-OSI equivalent"}),(0,n.jsx)(s.td,{children:'"http/1.1"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"network.protocol.version"})}),(0,n.jsxs)(s.td,{children:["Version of the protocol specified in ",(0,n.jsx)(s.code,{children:"network.protocol.name"})]}),(0,n.jsx)(s.td,{children:'"1.1"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"server.address"})}),(0,n.jsx)(s.td,{children:"Name of the local HTTP server that received the request"}),(0,n.jsx)(s.td,{children:'"example.com"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"server.port"})}),(0,n.jsx)(s.td,{children:"Port of the local HTTP server that received the request"}),(0,n.jsx)(s.td,{children:'"80"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"url.scheme"})}),(0,n.jsx)(s.td,{children:"The URI scheme component identifying the used protocol"}),(0,n.jsx)(s.td,{children:'"http"'})]})]})]}),"\n",(0,n.jsx)(s.h2,{id:"http-metrics",children:"HTTP Metrics"}),"\n",(0,n.jsx)(s.p,{children:"On top of the official OpenTelemetry semantic conventions, Mesh provides its own metrics to monitor the incoming traffic."}),"\n",(0,n.jsx)(s.h3,{id:"entrypoint-metrics",children:"EntryPoint Metrics"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Metric"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:(0,n.jsx)(s.a,{href:"#labels",children:"Labels"})}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"entrypoint"})]}),(0,n.jsx)(s.td,{children:"The total count of HTTP requests received by an entrypoint."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests TLS total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"tls_version"}),", ",(0,n.jsx)(s.code,{children:"tls_cipher"}),", ",(0,n.jsx)(s.code,{children:"entrypoint"})]}),(0,n.jsx)(s.td,{children:"The total count of HTTPS requests received by an entrypoint."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Request duration"}),(0,n.jsx)(s.td,{children:"Histogram"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"entrypoint"})]}),(0,n.jsx)(s.td,{children:"Request processing duration histogram on an entrypoint."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests bytes total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"entrypoint"})]}),(0,n.jsx)(s.td,{children:"The total size of HTTP requests in bytes handled by an entrypoint."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Responses bytes total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"entrypoint"})]}),(0,n.jsx)(s.td,{children:"The total size of HTTP responses in bytes handled by an entrypoint."})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-opentelemetry",metastring:'tab="OpenTelemetry"',children:"Mesh_entrypoint_requests_total\nMesh_entrypoint_requests_tls_total\nMesh_entrypoint_request_duration_seconds\nMesh_entrypoint_requests_bytes_total\nMesh_entrypoint_responses_bytes_total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-prom",metastring:'tab="Prometheus"',children:"Mesh_entrypoint_requests_total\nMesh_entrypoint_requests_tls_total\nMesh_entrypoint_request_duration_seconds\nMesh_entrypoint_requests_bytes_total\nMesh_entrypoint_responses_bytes_total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-dd",metastring:'tab="Datadog"',children:"entrypoint.request.total\nentrypoint.request.tls.total\nentrypoint.request.duration\nentrypoint.requests.bytes.total\nentrypoint.responses.bytes.total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-influxdb",metastring:'tab="InfluxDB2"',children:"Mesh.entrypoint.requests.total\nMesh.entrypoint.requests.tls.total\nMesh.entrypoint.request.duration\nMesh.entrypoint.requests.bytes.total\nMesh.entrypoint.responses.bytes.total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-statsd",metastring:'tab="StatsD"',children:'# Default prefix: "Mesh"\n{prefix}.entrypoint.request.total\n{prefix}.entrypoint.request.tls.total\n{prefix}.entrypoint.request.duration\n{prefix}.entrypoint.requests.bytes.total\n{prefix}.entrypoint.responses.bytes.total\n'})}),"\n",(0,n.jsx)(s.h3,{id:"router-metrics",children:"Router Metrics"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Metric"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:(0,n.jsx)(s.a,{href:"#labels",children:"Labels"})}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"router"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total count of HTTP requests handled by a router."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests TLS total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"tls_version"}),", ",(0,n.jsx)(s.code,{children:"tls_cipher"}),", ",(0,n.jsx)(s.code,{children:"router"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total count of HTTPS requests handled by a router."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Request duration"}),(0,n.jsx)(s.td,{children:"Histogram"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"router"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"Request processing duration histogram on a router."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests bytes total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"router"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total size of HTTP requests in bytes handled by a router."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Responses bytes total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"router"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total size of HTTP responses in bytes handled by a router."})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-opentelemetry",metastring:'tab="OpenTelemetry"',children:"Mesh_router_requests_total\nMesh_router_requests_tls_total\nMesh_router_request_duration_seconds\nMesh_router_requests_bytes_total\nMesh_router_responses_bytes_total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-prom",metastring:'tab="Prometheus"',children:"Mesh_router_requests_total\nMesh_router_requests_tls_total\nMesh_router_request_duration_seconds\nMesh_router_requests_bytes_total\nMesh_router_responses_bytes_total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-dd",metastring:'tab="Datadog"',children:"router.request.total\nrouter.request.tls.total\nrouter.request.duration\nrouter.requests.bytes.total\nrouter.responses.bytes.total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-influxdb",metastring:'tab="InfluxDB2"',children:"Mesh.router.requests.total\nMesh.router.requests.tls.total\nMesh.router.request.duration\nMesh.router.requests.bytes.total\nMesh.router.responses.bytes.total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-statsd",metastring:'tab="StatsD"',children:'# Default prefix: "Mesh"\n{prefix}.router.request.total\n{prefix}.router.request.tls.total\n{prefix}.router.request.duration\n{prefix}.router.requests.bytes.total\n{prefix}.router.responses.bytes.total\n'})}),"\n",(0,n.jsx)(s.h3,{id:"service-metrics",children:"Service Metrics"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Metric"}),(0,n.jsx)(s.th,{children:"Type"}),(0,n.jsx)(s.th,{children:"Labels"}),(0,n.jsx)(s.th,{children:"Description"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total count of HTTP requests processed on a service."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests TLS total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"tls_version"}),", ",(0,n.jsx)(s.code,{children:"tls_cipher"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total count of HTTPS requests processed on a service."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Request duration"}),(0,n.jsx)(s.td,{children:"Histogram"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"Request processing duration histogram on a service."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Retries total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"service"})}),(0,n.jsx)(s.td,{children:"The count of requests retries on a service."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Server UP"}),(0,n.jsx)(s.td,{children:"Gauge"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"service"}),", ",(0,n.jsx)(s.code,{children:"url"})]}),(0,n.jsx)(s.td,{children:"Current service's server status, 0 for a down or 1 for up."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Requests bytes total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total size of requests in bytes received by a service."})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"Responses bytes total"}),(0,n.jsx)(s.td,{children:"Count"}),(0,n.jsxs)(s.td,{children:[(0,n.jsx)(s.code,{children:"code"}),", ",(0,n.jsx)(s.code,{children:"method"}),", ",(0,n.jsx)(s.code,{children:"protocol"}),", ",(0,n.jsx)(s.code,{children:"service"})]}),(0,n.jsx)(s.td,{children:"The total size of responses in bytes returned by a service."})]})]})]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-opentelemetry",metastring:'tab="OpenTelemetry"',children:"Mesh_service_requests_total\nMesh_service_requests_tls_total\nMesh_service_request_duration_seconds\nMesh_service_retries_total\nMesh_service_server_up\nMesh_service_requests_bytes_total\nMesh_service_responses_bytes_total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-prom",metastring:'tab="Prometheus"',children:"Mesh_service_requests_total\nMesh_service_requests_tls_total\nMesh_service_request_duration_seconds\nMesh_service_retries_total\nMesh_service_server_up\nMesh_service_requests_bytes_total\nMesh_service_responses_bytes_total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-dd",metastring:'tab="Datadog"',children:"service.request.total\nrouter.service.tls.total\nservice.request.duration\nservice.retries.total\nservice.server.up\nservice.requests.bytes.total\nservice.responses.bytes.total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-influxdb",metastring:'tab="InfluxDB2"',children:"Mesh.service.requests.total\nMesh.service.requests.tls.total\nMesh.service.request.duration\nMesh.service.retries.total\nMesh.service.server.up\nMesh.service.requests.bytes.total\nMesh.service.responses.bytes.total\n"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-statsd",metastring:'tab="StatsD"',children:'# Default prefix: "Mesh"\n{prefix}.service.request.total\n{prefix}.service.request.tls.total\n{prefix}.service.request.duration\n{prefix}.service.retries.total\n{prefix}.service.server.up\n{prefix}.service.requests.bytes.total\n{prefix}.service.responses.bytes.total\n'})}),"\n",(0,n.jsx)(s.h3,{id:"labels-3",children:"Labels"}),"\n",(0,n.jsx)(s.p,{children:"Here is a comprehensive list of labels that are provided by the metrics:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{children:"Label"}),(0,n.jsx)(s.th,{children:"Description"}),(0,n.jsx)(s.th,{children:"example"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"cn"})}),(0,n.jsx)(s.td,{children:"Certificate Common Name"}),(0,n.jsx)(s.td,{children:'"example.com"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"code"})}),(0,n.jsx)(s.td,{children:"Request code"}),(0,n.jsx)(s.td,{children:'"200"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"entrypoint"})}),(0,n.jsx)(s.td,{children:"Entrypoint that handled the request"}),(0,n.jsx)(s.td,{children:'"example_entrypoint"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"method"})}),(0,n.jsx)(s.td,{children:"Request Method"}),(0,n.jsx)(s.td,{children:'"GET"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"protocol"})}),(0,n.jsx)(s.td,{children:"Request protocol"}),(0,n.jsx)(s.td,{children:'"http"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"router"})}),(0,n.jsx)(s.td,{children:"Router that handled the request"}),(0,n.jsx)(s.td,{children:'"example_router"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"sans"})}),(0,n.jsx)(s.td,{children:"Certificate Subject Alternative NameS"}),(0,n.jsx)(s.td,{children:'"example.com"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"serial"})}),(0,n.jsx)(s.td,{children:"Certificate Serial Number"}),(0,n.jsx)(s.td,{children:'"123..."'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"service"})}),(0,n.jsx)(s.td,{children:"Service that handled the request"}),(0,n.jsx)(s.td,{children:'"example_service@provider"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"tls_cipher"})}),(0,n.jsx)(s.td,{children:"TLS cipher used for the request"}),(0,n.jsx)(s.td,{children:'"TLS_FALLBACK_SCSV"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"tls_version"})}),(0,n.jsx)(s.td,{children:"TLS version used for the request"}),(0,n.jsx)(s.td,{children:'"1.0"'})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:(0,n.jsx)(s.code,{children:"url"})}),(0,n.jsx)(s.td,{children:"Service server url"}),(0,n.jsxs)(s.td,{children:['"',(0,n.jsx)(s.a,{href:"http://example.com",children:"http://example.com"}),'"']})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:['!!! info "',(0,n.jsx)(s.code,{children:"method"}),' label value"']}),"\n",(0,n.jsxs)(s.p,{children:["If the HTTP method verb on a request is not one defined in the set of common methods for ",(0,n.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods",children:(0,n.jsx)(s.code,{children:"HTTP/1.1"})}),"\nor the ",(0,n.jsx)(s.a,{href:"https://datatracker.ietf.org/doc/html/rfc7540#section-11.6",children:(0,n.jsx)(s.code,{children:"PRI"})})," verb (for ",(0,n.jsx)(s.code,{children:"HTTP/2"}),"),\nthen the value for the method label becomes ",(0,n.jsx)(s.code,{children:"EXTENSION_METHOD"}),"."]})]})}function a(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>c});var r=t(6540);const n={},d=r.createContext(n);function i(e){const s=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),r.createElement(d.Provider,{value:s},e.children)}}}]);