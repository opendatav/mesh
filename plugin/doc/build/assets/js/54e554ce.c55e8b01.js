"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[4133],{4496:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"security/tls-certs-in-multi-tenant-kubernetes","title":"TLS Certificates in Multi\u2011Tenant Kubernetes","description":"Isolate TLS certificates in multi\u2011tenant clusters by keeping Secrets and routes in the same namespace and disabling cross\u2011namespace look\u2011ups in Mesh. Read the technical guidelines.","source":"@site/docs/security/tls-certs-in-multi-tenant-kubernetes.md","sourceDirName":"security","slug":"/security/tls-certs-in-multi-tenant-kubernetes","permalink":"/doc/docs/security/tls-certs-in-multi-tenant-kubernetes","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/security/tls-certs-in-multi-tenant-kubernetes.md","tags":[],"version":"current","frontMatter":{"title":"TLS Certificates in Multi\u2011Tenant Kubernetes","description":"Isolate TLS certificates in multi\u2011tenant clusters by keeping Secrets and routes in the same namespace and disabling cross\u2011namespace look\u2011ups in Mesh. Read the technical guidelines."},"sidebar":"tutorialSidebar","previous":{"title":"Content-Length","permalink":"/doc/docs/security/content-length"},"next":{"title":"Integration with cert-manager","permalink":"/doc/docs/user-guides/cert-manager"}}');var i=n(4848),r=n(8453);const a={title:"TLS Certificates in Multi\u2011Tenant Kubernetes",description:"Isolate TLS certificates in multi\u2011tenant clusters by keeping Secrets and routes in the same namespace and disabling cross\u2011namespace look\u2011ups in Mesh. Read the technical guidelines."},c="TLS Certificates in Multi\u2011Tenant Kubernetes",o={},d=[{value:"Recommended setup",id:"recommended-setup",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"tls-certificates-in-multitenant-kubernetes",children:"TLS Certificates in Multi\u2011Tenant Kubernetes"})}),"\n",(0,i.jsxs)(t.p,{children:["In a shared cluster, different teams can create ",(0,i.jsx)(t.code,{children:"Ingress"})," or ",(0,i.jsx)(t.code,{children:"IngressRoute"})," objects that Mesh consumes."]}),"\n",(0,i.jsxs)(t.p,{children:["Mesh does not support multi-tenancy when using the Kubernetes ",(0,i.jsx)(t.code,{children:"Ingress"})," or ",(0,i.jsx)(t.code,{children:"IngressRoute"})," specifications due to the way TLS certificate management is handled."]}),"\n",(0,i.jsxs)(t.p,{children:["At the core of this limitation is the TLS Store, which holds all the TLS certificates used by Mesh.\nAs this Store is global in Mesh, it is shared across all namespaces, meaning any ",(0,i.jsx)(t.code,{children:"Ingress"})," or ",(0,i.jsx)(t.code,{children:"IngressRoute"})," in the cluster can potentially reference or affect TLS configurations intended for other tenants."]}),"\n",(0,i.jsx)(t.p,{children:"This lack of isolation poses a risk in multi-tenant environments where different teams or applications require strict boundaries between resources, especially around sensitive data like TLS certificates."}),"\n",(0,i.jsxs)(t.p,{children:["In contrast, the ",(0,i.jsx)(t.a,{href:"/doc/docs/providers/kubernetes-gateway",children:"Kubernetes Gateway API"})," provides better primitives for secure multi-tenancy.\nSpecifically, the ",(0,i.jsx)(t.code,{children:"Listener"})," resource in the Gateway API allows administrators to explicitly define which Route resources (e.g., ",(0,i.jsx)(t.code,{children:"HTTPRoute"}),") are permitted to bind to which domain names or ports.\nThis capability enforces stricter ownership and isolation, making it a safer choice for multi-tenant use cases."]}),"\n",(0,i.jsx)(t.h2,{id:"recommended-setup",children:"Recommended setup"}),"\n",(0,i.jsx)(t.p,{children:"When strict boundaries are required between resources and teams, we recommend using one Mesh instance per tenant."}),"\n",(0,i.jsxs)(t.p,{children:["In Kubernetes one way to isolate a tenant is to restrict it to a namespace.\nIn that case, the namespace options from the Kubernetes ",(0,i.jsx)(t.a,{href:"/doc/docs/providers/kubernetes-crd#namespaces",children:"CRD"})," and ",(0,i.jsx)(t.a,{href:"/doc/docs/providers/kubernetes-ingress#namespaces",children:"Ingress"})," providers can be leveraged."]}),"\n",(0,i.jsx)(t.p,{children:'!!! tip "Dedicate one Mesh instance per tenant using the Helm Chart"'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",children:"providers:\n  kubernetesCRD:\n    namespaces:\n      - tenant\n  kubernetesIngress:\n    namespaces:\n      - tenant\n"})})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var s=n(6540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);