"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[7863],{4327:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"reference/routing-configuration/kubernetes/crd/tcp/serverstransporttcp","title":"ServersTransportTCP","description":"Understand the service routing configuration for the Kubernetes ServerTransportTCP & Mesh CRD","source":"@site/docs/reference/routing-configuration/kubernetes/crd/tcp/serverstransporttcp.md","sourceDirName":"reference/routing-configuration/kubernetes/crd/tcp","slug":"/reference/routing-configuration/kubernetes/crd/tcp/serverstransporttcp","permalink":"/doc/docs/reference/routing-configuration/kubernetes/crd/tcp/serverstransporttcp","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/reference/routing-configuration/kubernetes/crd/tcp/serverstransporttcp.md","tags":[],"version":"current","frontMatter":{"title":"ServersTransportTCP","description":"Understand the service routing configuration for the Kubernetes ServerTransportTCP & Mesh CRD"},"sidebar":"tutorialSidebar","previous":{"title":"Kubernetes MiddlewareTCP","permalink":"/doc/docs/reference/routing-configuration/kubernetes/crd/tcp/middlewaretcp"},"next":{"title":"TLSOption","permalink":"/doc/docs/reference/routing-configuration/kubernetes/crd/tcp/tlsoption"}}');var s=t(4848),i=t(8453);const o={title:"ServersTransportTCP",description:"Understand the service routing configuration for the Kubernetes ServerTransportTCP & Mesh CRD"},c=void 0,d={},a=[{value:"Configuration Example",id:"configuration-example",level:2},{value:"Configuration Options",id:"configuration-options",level:2}];function l(e){const r={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.code,{children:"ServersTransportTCP"})," is the CRD implementation of ",(0,s.jsx)(r.a,{href:"/doc/docs/reference/routing-configuration/tcp/serverstransport",children:"ServersTransportTCP"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Before creating ",(0,s.jsx)(r.code,{children:"ServersTransportTCP"})," objects, you need to apply the ",(0,s.jsx)(r.a,{href:"https://doc.Mesh.io/Mesh/reference/dynamic-configuration/kubernetes-crd/#definitions",children:"Mesh Kubernetes CRDs"})," to your Kubernetes cluster."]}),"\n",(0,s.jsxs)(r.p,{children:["This registers the ",(0,s.jsx)(r.code,{children:"ServersTransportTCP"})," kind and other mesh-specific resources."]}),"\n",(0,s.jsxs)(r.p,{children:['!!! tip "Default serversTransportTCP"\nIf no ',(0,s.jsx)(r.code,{children:"serversTransportTCP"})," is specified, the ",(0,s.jsx)(r.code,{children:"default@internal"})," will be used. The ",(0,s.jsx)(r.code,{children:"default@internal"})," ",(0,s.jsx)(r.code,{children:"serversTransportTCP"})," is created from the install configuration (formerly known as static configuration)."]}),"\n",(0,s.jsxs)(r.p,{children:['!!! note "ServersTransport reference"\nBy default, the referenced ',(0,s.jsx)(r.code,{children:"ServersTransportTCP"})," CRD must be defined in the same Kubernetes service namespace."]}),"\n",(0,s.jsxs)(r.p,{children:["To reference a ",(0,s.jsx)(r.code,{children:"ServersTransportTCP"})," CRD from another namespace, the value must be of form ",(0,s.jsx)(r.code,{children:"namespace-name@kubernetescrd"}),", and the ",(0,s.jsx)(r.code,{children:"allowCrossNamespace"})," option must be enabled."]}),"\n",(0,s.jsxs)(r.p,{children:["If the ",(0,s.jsx)(r.code,{children:"ServersTransportTCP"})," CRD is defined in another provider the cross-provider format ",(0,s.jsx)(r.code,{children:"name@provider"})," should be used."]}),"\n",(0,s.jsx)(r.h2,{id:"configuration-example",children:"Configuration Example"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",metastring:'tab="ServersTransportTCP"',children:"apiVersion: Mesh.io/v1alpha1\nkind: ServersTransportTCP\nmetadata:\n  name: mytransport\n  namespace: default\n\nspec:\n  tls:\n    serverName: example.org\n    insecureSkipVerify: true\n"})}),"\n",(0,s.jsx)(r.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Field"}),(0,s.jsx)(r.th,{children:"Description"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Required"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"dialTimeout"})}),(0,s.jsx)(r.td,{children:"The amount of time to wait until a connection to a server can be established. If zero, no timeout exists."}),(0,s.jsx)(r.td,{children:"30s"}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"dialKeepAlive"})}),(0,s.jsxs)(r.td,{children:["The interval between keep-alive probes for an active network connection.",(0,s.jsx)("br",{}),"If this option is set to zero, keep-alive probes are sent with a default value (currently 15 seconds),",(0,s.jsx)("br",{}),"if supported by the protocol and operating system. Network protocols or operating systems that do not support keep-alives ignore this field.",(0,s.jsx)("br",{}),"If negative, keep-alive probes are turned off."]}),(0,s.jsx)(r.td,{children:"15s"}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"terminationDelay"})}),(0,s.jsx)(r.td,{children:"Defines the delay to wait before fully terminating the connection, after one connected peer has closed its writing capability."}),(0,s.jsx)(r.td,{children:"100ms"}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"tls.serverName"})}),(0,s.jsx)(r.td,{children:"ServerName used to contact the server."}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"tls.insecureSkipVerify"})}),(0,s.jsx)(r.td,{children:"Controls whether the server's certificate chain and host name is verified."}),(0,s.jsx)(r.td,{children:"false"}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"tls.peerCertURI"})}),(0,s.jsx)(r.td,{children:"Defines the URI used to match against SAN URIs during the server's certificate verification."}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"tls.rootCAsSecrets"})}),(0,s.jsxs)(r.td,{children:["Defines the set of root certificate authorities to use when verifying server certificates.",(0,s.jsx)("br",{}),"The CA secret must contain a base64 encoded certificate under either a ",(0,s.jsx)(r.code,{children:"tls.ca"})," or a ",(0,s.jsx)(r.code,{children:"ca.crt"})," key."]}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"tls.certificatesSecrets"})}),(0,s.jsx)(r.td,{children:"Certificates to present to the server for mTLS."}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"spiffe"})}),(0,s.jsxs)(r.td,{children:["Configures ",(0,s.jsx)(r.a,{href:"/doc/docs/reference/install-configuration/tls/spiffe",children:"SPIFFE"})," options."]}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"spiffe.ids"})}),(0,s.jsxs)(r.td,{children:["Defines the allowed SPIFFE IDs. This takes precedence over the SPIFFE ",(0,s.jsx)(r.code,{children:"trustDomain"}),"."]}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"spiffe.trustDomain"})}),(0,s.jsx)(r.td,{children:"Defines the allowed SPIFFE trust domain."}),(0,s.jsx)(r.td,{children:'""'}),(0,s.jsx)(r.td,{children:"No"})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>o,x:()=>c});var n=t(6540);const s={},i=n.createContext(s);function o(e){const r=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);