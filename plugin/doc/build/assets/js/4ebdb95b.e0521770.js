"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[9254],{6308:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>c});const d=JSON.parse('{"id":"middlewares/http/headers","title":"Mesh Headers Documentation","description":"In Mesh Proxy, the HTTP headers middleware manages the headers of requests and responses. Read the technical documentation.","source":"@site/docs/middlewares/http/headers.md","sourceDirName":"middlewares/http","slug":"/middlewares/http/headers","permalink":"/doc/docs/middlewares/http/headers","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/middlewares/http/headers.md","tags":[],"version":"current","frontMatter":{"title":"Mesh Headers Documentation","description":"In Mesh Proxy, the HTTP headers middleware manages the headers of requests and responses. Read the technical documentation."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh GrpcWeb Documentation","permalink":"/doc/docs/middlewares/http/grpcweb"},"next":{"title":"Mesh InFlightReq Documentation","permalink":"/doc/docs/middlewares/http/inflightreq"}}');var t=r(4848),n=r(8453);const o={title:"Mesh Headers Documentation",description:"In Mesh Proxy, the HTTP headers middleware manages the headers of requests and responses. Read the technical documentation."},a="Headers",l={},c=[{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Adding Headers to the Request and the Response",id:"adding-headers-to-the-request-and-the-response",level:3},{value:"Adding and Removing Headers",id:"adding-and-removing-headers",level:3},{value:"Using Security Headers",id:"using-security-headers",level:3},{value:"CORS Headers",id:"cors-headers",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"General",id:"general",level:3},{value:"<code>customRequestHeaders</code>",id:"customrequestheaders",level:3},{value:"<code>customResponseHeaders</code>",id:"customresponseheaders",level:3},{value:"<code>accessControlAllowCredentials</code>",id:"accesscontrolallowcredentials",level:3},{value:"<code>accessControlAllowHeaders</code>",id:"accesscontrolallowheaders",level:3},{value:"<code>accessControlAllowMethods</code>",id:"accesscontrolallowmethods",level:3},{value:"<code>accessControlAllowOriginList</code>",id:"accesscontrolalloworiginlist",level:3},{value:"<code>accessControlAllowOriginListRegex</code>",id:"accesscontrolalloworiginlistregex",level:3},{value:"<code>accessControlExposeHeaders</code>",id:"accesscontrolexposeheaders",level:3},{value:"<code>accessControlMaxAge</code>",id:"accesscontrolmaxage",level:3},{value:"<code>addVaryHeader</code>",id:"addvaryheader",level:3},{value:"<code>allowedHosts</code>",id:"allowedhosts",level:3},{value:"<code>hostsProxyHeaders</code>",id:"hostsproxyheaders",level:3},{value:"<code>sslRedirect</code>",id:"sslredirect",level:3},{value:"<code>sslTemporaryRedirect</code>",id:"ssltemporaryredirect",level:3},{value:"<code>sslHost</code>",id:"sslhost",level:3},{value:"<code>sslProxyHeaders</code>",id:"sslproxyheaders",level:3},{value:"<code>sslForceHost</code>",id:"sslforcehost",level:3},{value:"<code>stsSeconds</code>",id:"stsseconds",level:3},{value:"<code>stsIncludeSubdomains</code>",id:"stsincludesubdomains",level:3},{value:"<code>stsPreload</code>",id:"stspreload",level:3},{value:"<code>forceSTSHeader</code>",id:"forcestsheader",level:3},{value:"<code>frameDeny</code>",id:"framedeny",level:3},{value:"<code>customFrameOptionsValue</code>",id:"customframeoptionsvalue",level:3},{value:"<code>contentTypeNosniff</code>",id:"contenttypenosniff",level:3},{value:"<code>browserXssFilter</code>",id:"browserxssfilter",level:3},{value:"<code>customBrowserXSSValue</code>",id:"custombrowserxssvalue",level:3},{value:"<code>contentSecurityPolicy</code>",id:"contentsecuritypolicy",level:3},{value:"<code>contentSecurityPolicyReportOnly</code>",id:"contentsecuritypolicyreportonly",level:3},{value:"<code>publicKey</code>",id:"publickey",level:3},{value:"<code>referrerPolicy</code>",id:"referrerpolicy",level:3},{value:"<code>featurePolicy</code>",id:"featurepolicy",level:3},{value:"<code>permissionsPolicy</code>",id:"permissionspolicy",level:3},{value:"<code>isDevelopment</code>",id:"isdevelopment",level:3}];function i(e){const s={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"headers",children:"Headers"})}),"\n",(0,t.jsx)(s.p,{children:"Managing Request/Response headers"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Headers",src:r(8416).A+"",width:"2420",height:"410"})}),"\n",(0,t.jsx)(s.p,{children:"The Headers middleware manages the headers of requests and responses."}),"\n",(0,t.jsxs)(s.p,{children:["A set of forwarded headers are automatically added by default. See the ",(0,t.jsx)(s.a,{href:"/doc/docs/getting-started/faq#what-are-the-forwarded-headers-when-proxying-http-requests",children:"FAQ"})," for more information."]}),"\n",(0,t.jsx)(s.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,t.jsx)(s.h3,{id:"adding-headers-to-the-request-and-the-response",children:"Adding Headers to the Request and the Response"}),"\n",(0,t.jsxs)(s.p,{children:["The following example adds the ",(0,t.jsx)(s.code,{children:"X-Script-Name"})," header to the proxied request and the ",(0,t.jsx)(s.code,{children:"X-Custom-Response-Header"})," header to the response"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.testHeader.headers.customrequestheaders.X-Script-Name=test"\n  - "Mesh.http.middlewares.testHeader.headers.customresponseheaders.X-Custom-Response-Header=value"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:'apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-header\nspec:\n  headers:\n    customRequestHeaders:\n      X-Script-Name: "test"\n    customResponseHeaders:\n      X-Custom-Response-Header: "value"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.testheader.headers.customrequestheaders.X-Script-Name=test"\n- "Mesh.http.middlewares.testheader.headers.customresponseheaders.X-Custom-Response-Header=value"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'http:\n  middlewares:\n    testHeader:\n      headers:\n        customRequestHeaders:\n          X-Script-Name: "test"\n        customResponseHeaders:\n          X-Custom-Response-Header: "value"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[http.middlewares]\n  [http.middlewares.testHeader.headers]\n    [http.middlewares.testHeader.headers.customRequestHeaders]\n        X-Script-Name = "test"\n    [http.middlewares.testHeader.headers.customResponseHeaders]\n        X-Custom-Response-Header = "value"\n'})}),"\n",(0,t.jsx)(s.h3,{id:"adding-and-removing-headers",children:"Adding and Removing Headers"}),"\n",(0,t.jsxs)(s.p,{children:["In the following example, requests are proxied with an extra ",(0,t.jsx)(s.code,{children:"X-Script-Name"})," header while their ",(0,t.jsx)(s.code,{children:"X-Custom-Request-Header"})," header gets stripped,\nand responses are stripped of their ",(0,t.jsx)(s.code,{children:"X-Custom-Response-Header"})," header."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.testheader.headers.customrequestheaders.X-Script-Name=test"\n  - "Mesh.http.middlewares.testheader.headers.customrequestheaders.X-Custom-Request-Header="\n  - "Mesh.http.middlewares.testheader.headers.customresponseheaders.X-Custom-Response-Header="\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:'apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-header\nspec:\n  headers:\n    customRequestHeaders:\n      X-Script-Name: "test" # Adds\n      X-Custom-Request-Header: "" # Removes\n    customResponseHeaders:\n      X-Custom-Response-Header: "" # Removes\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.testheader.headers.customrequestheaders.X-Script-Name=test"\n- "Mesh.http.middlewares.testheader.headers.customrequestheaders.X-Custom-Request-Header="\n- "Mesh.http.middlewares.testheader.headers.customresponseheaders.X-Custom-Response-Header="\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'http:\n  middlewares:\n    testHeader:\n      headers:\n        customRequestHeaders:\n          X-Script-Name: "test" # Adds\n          X-Custom-Request-Header: "" # Removes\n        customResponseHeaders:\n          X-Custom-Response-Header: "" # Removes\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[http.middlewares]\n  [http.middlewares.testHeader.headers]\n    [http.middlewares.testHeader.headers.customRequestHeaders]\n        X-Script-Name = "test" # Adds\n        X-Custom-Request-Header = "" # Removes\n    [http.middlewares.testHeader.headers.customResponseHeaders]\n        X-Custom-Response-Header = "" # Removes\n'})}),"\n",(0,t.jsx)(s.h3,{id:"using-security-headers",children:"Using Security Headers"}),"\n",(0,t.jsx)(s.p,{children:"Security-related headers (HSTS headers, Browser XSS filter, etc) can be managed similarly to custom headers as shown above.\nThis functionality makes it possible to easily use security features by adding headers."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.testHeader.headers.framedeny=true"\n  - "Mesh.http.middlewares.testHeader.headers.browserxssfilter=true"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-header\nspec:\n  headers:\n    frameDeny: true\n    browserXssFilter: true\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.testheader.headers.framedeny=true"\n- "Mesh.http.middlewares.testheader.headers.browserxssfilter=true"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"http:\n  middlewares:\n    testHeader:\n      headers:\n        frameDeny: true\n        browserXssFilter: true\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"[http.middlewares]\n  [http.middlewares.testHeader.headers]\n    frameDeny = true\n    browserXssFilter = true\n"})}),"\n",(0,t.jsx)(s.h3,{id:"cors-headers",children:"CORS Headers"}),"\n",(0,t.jsxs)(s.p,{children:["CORS (Cross-Origin Resource Sharing) headers can be added and configured in a manner similar to the custom headers above.\nThis functionality allows for more advanced security features to quickly be set.\nIf CORS headers are set, then the middleware does not pass preflight requests to any service,\ninstead the response will be generated and sent back to the client directly.",(0,t.jsx)(s.br,{}),"\n","Please note that the example below is by no means authoritative or exhaustive,\nand should not be used as is for production."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Docker & Swarm"',children:'labels:\n  - "Mesh.http.middlewares.testheader.headers.accesscontrolallowmethods=GET,OPTIONS,PUT"\n  - "Mesh.http.middlewares.testheader.headers.accesscontrolallowheaders=*"\n  - "Mesh.http.middlewares.testheader.headers.accesscontrolalloworiginlist=https://foo.bar.org,https://example.org"\n  - "Mesh.http.middlewares.testheader.headers.accesscontrolmaxage=100"\n  - "Mesh.http.middlewares.testheader.headers.addvaryheader=true"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:'apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-header\nspec:\n  headers:\n    accessControlAllowMethods:\n      - "GET"\n      - "OPTIONS"\n      - "PUT"\n    accessControlAllowHeaders:\n      - "*"\n    accessControlAllowOriginList:\n      - "https://foo.bar.org"\n      - "https://example.org"\n    accessControlMaxAge: 100\n    addVaryHeader: true\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="Consul Catalog"',children:'- "Mesh.http.middlewares.testheader.headers.accesscontrolallowmethods=GET,OPTIONS,PUT"\n- "Mesh.http.middlewares.testheader.headers.accesscontrolallowheaders=*"\n- "Mesh.http.middlewares.testheader.headers.accesscontrolalloworiginlist=https://foo.bar.org,https://example.org"\n- "Mesh.http.middlewares.testheader.headers.accesscontrolmaxage=100"\n- "Mesh.http.middlewares.testheader.headers.addvaryheader=true"\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:'http:\n  middlewares:\n    testHeader:\n      headers:\n        accessControlAllowMethods:\n          - GET\n          - OPTIONS\n          - PUT\n        accessControlAllowHeaders: "*"\n        accessControlAllowOriginList:\n          - https://foo.bar.org\n          - https://example.org\n        accessControlMaxAge: 100\n        addVaryHeader: true\n'})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:'[http.middlewares]\n  [http.middlewares.testHeader.headers]\n    accessControlAllowMethods = ["GET", "OPTIONS", "PUT"]\n    accessControlAllowHeaders = [ "*" ]\n    accessControlAllowOriginList = ["https://foo.bar.org","https://example.org"]\n    accessControlMaxAge = 100\n    addVaryHeader = true\n'})}),"\n",(0,t.jsx)(s.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,t.jsx)(s.h3,{id:"general",children:"General"}),"\n",(0,t.jsx)(s.p,{children:"!!! warning"}),"\n",(0,t.jsx)(s.p,{children:"Custom headers will overwrite existing headers if they have identical names."}),"\n",(0,t.jsx)(s.p,{children:'!!! note ""'}),"\n",(0,t.jsxs)(s.p,{children:["The detailed documentation for security headers can be found in ",(0,t.jsx)(s.a,{href:"https://github.com/unrolled/secure#available-options",children:"unrolled/secure"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"customrequestheaders",children:(0,t.jsx)(s.code,{children:"customRequestHeaders"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"customRequestHeaders"})," option lists the header names and values to apply to the request."]}),"\n",(0,t.jsx)(s.h3,{id:"customresponseheaders",children:(0,t.jsx)(s.code,{children:"customResponseHeaders"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"customResponseHeaders"})," option lists the header names and values to apply to the response."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolallowcredentials",children:(0,t.jsx)(s.code,{children:"accessControlAllowCredentials"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"accessControlAllowCredentials"})," indicates whether the request can include user credentials."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolallowheaders",children:(0,t.jsx)(s.code,{children:"accessControlAllowHeaders"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"accessControlAllowHeaders"})," indicates which header field names can be used as part of the request."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolallowmethods",children:(0,t.jsx)(s.code,{children:"accessControlAllowMethods"})}),"\n",(0,t.jsxs)(s.p,{children:["The  ",(0,t.jsx)(s.code,{children:"accessControlAllowMethods"})," indicates which methods can be used during requests."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolalloworiginlist",children:(0,t.jsx)(s.code,{children:"accessControlAllowOriginList"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"accessControlAllowOriginList"})," indicates whether a resource can be shared by returning different values."]}),"\n",(0,t.jsxs)(s.p,{children:["A wildcard origin ",(0,t.jsx)(s.code,{children:"*"})," can also be configured, and matches all requests.\nIf this value is set by a backend service, it will be overwritten by Mesh."]}),"\n",(0,t.jsx)(s.p,{children:"This value can contain a list of allowed origins."}),"\n",(0,t.jsx)(s.p,{children:"More information including how to use the settings can be found at:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Allow-Origin",children:"Mozilla.org"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://fetch.spec.whatwg.org/#http-access-control-allow-origin",children:"w3"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://tools.ietf.org/html/rfc6454#section-7.1",children:"IETF"})}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["Mesh no longer supports the ",(0,t.jsx)(s.code,{children:"null"})," value, as it is ",(0,t.jsx)(s.a,{href:"https://w3c.github.io/webappsec-cors-for-developers/#avoid-returning-access-control-allow-origin-null",children:"no longer recommended as a return value"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolalloworiginlistregex",children:(0,t.jsx)(s.code,{children:"accessControlAllowOriginListRegex"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"accessControlAllowOriginListRegex"})," option is the counterpart of the ",(0,t.jsx)(s.code,{children:"accessControlAllowOriginList"})," option with regular expressions instead of origin values.\nIt allows all origins that contain any match of a regular expression in the ",(0,t.jsx)(s.code,{children:"accessControlAllowOriginList"}),"."]}),"\n",(0,t.jsx)(s.p,{children:"!!! tip"}),"\n",(0,t.jsxs)(s.p,{children:["Regular expressions and replacements can be tested using online tools such as ",(0,t.jsx)(s.a,{href:"https://play.golang.org/p/mWU9p-wk2ru",children:"Go Playground"})," or the ",(0,t.jsx)(s.a,{href:"https://regex101.com/r/58sIgx/2",children:"Regex101"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["When defining a regular expression within YAML, any escaped character needs to be escaped twice: ",(0,t.jsx)(s.code,{children:"example\\.com"})," needs to be written as ",(0,t.jsx)(s.code,{children:"example\\\\.com"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolexposeheaders",children:(0,t.jsx)(s.code,{children:"accessControlExposeHeaders"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"accessControlExposeHeaders"})," indicates which headers are safe to expose to the api of a CORS API specification."]}),"\n",(0,t.jsx)(s.h3,{id:"accesscontrolmaxage",children:(0,t.jsx)(s.code,{children:"accessControlMaxAge"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"accessControlMaxAge"})," indicates how many seconds a preflight request can be cached for."]}),"\n",(0,t.jsx)(s.h3,{id:"addvaryheader",children:(0,t.jsx)(s.code,{children:"addVaryHeader"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"addVaryHeader"})," is used in conjunction with ",(0,t.jsx)(s.code,{children:"accessControlAllowOriginList"})," to determine whether the ",(0,t.jsx)(s.code,{children:"Vary"})," header should be added or modified to demonstrate that server responses can differ based on the value of the origin header."]}),"\n",(0,t.jsx)(s.h3,{id:"allowedhosts",children:(0,t.jsx)(s.code,{children:"allowedHosts"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"allowedHosts"})," option lists fully qualified domain names that are allowed."]}),"\n",(0,t.jsx)(s.h3,{id:"hostsproxyheaders",children:(0,t.jsx)(s.code,{children:"hostsProxyHeaders"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"hostsProxyHeaders"})," option is a set of header keys that may hold a proxied hostname value for the request."]}),"\n",(0,t.jsx)(s.h3,{id:"sslredirect",children:(0,t.jsx)(s.code,{children:"sslRedirect"})}),"\n",(0,t.jsx)(s.p,{children:"!!! warning"}),"\n",(0,t.jsxs)(s.p,{children:["Deprecated in favor of ",(0,t.jsx)(s.a,{href:"/doc/docs/routing/entrypoints#redirection",children:"EntryPoint redirection"})," or the ",(0,t.jsx)(s.a,{href:"/doc/docs/middlewares/http/redirectscheme",children:"RedirectScheme middleware"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"sslRedirect"})," only allow HTTPS requests when set to ",(0,t.jsx)(s.code,{children:"true"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"ssltemporaryredirect",children:(0,t.jsx)(s.code,{children:"sslTemporaryRedirect"})}),"\n",(0,t.jsx)(s.p,{children:"!!! warning"}),"\n",(0,t.jsxs)(s.p,{children:["Deprecated in favor of ",(0,t.jsx)(s.a,{href:"/doc/docs/routing/entrypoints#redirection",children:"EntryPoint redirection"})," or the ",(0,t.jsx)(s.a,{href:"/doc/docs/middlewares/http/redirectscheme",children:"RedirectScheme middleware"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"sslTemporaryRedirect"})," to ",(0,t.jsx)(s.code,{children:"true"})," to force an SSL redirection using a 302 (instead of a 301)."]}),"\n",(0,t.jsx)(s.h3,{id:"sslhost",children:(0,t.jsx)(s.code,{children:"sslHost"})}),"\n",(0,t.jsx)(s.p,{children:"!!! warning"}),"\n",(0,t.jsxs)(s.p,{children:["Deprecated in favor of the ",(0,t.jsx)(s.a,{href:"/doc/docs/middlewares/http/redirectregex",children:"RedirectRegex middleware"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"sslHost"})," option is the host name that is used to redirect HTTP requests to HTTPS."]}),"\n",(0,t.jsx)(s.h3,{id:"sslproxyheaders",children:(0,t.jsx)(s.code,{children:"sslProxyHeaders"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"sslProxyHeaders"})," option is set of header keys with associated values that would indicate a valid HTTPS request.\nIt can be useful when using other proxies (example: ",(0,t.jsx)(s.code,{children:'"X-Forwarded-Proto": "https"'}),")."]}),"\n",(0,t.jsx)(s.h3,{id:"sslforcehost",children:(0,t.jsx)(s.code,{children:"sslForceHost"})}),"\n",(0,t.jsx)(s.p,{children:"!!! warning"}),"\n",(0,t.jsxs)(s.p,{children:["Deprecated in favor of the ",(0,t.jsx)(s.a,{href:"/doc/docs/middlewares/http/redirectregex",children:"RedirectRegex middleware"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"sslForceHost"})," to ",(0,t.jsx)(s.code,{children:"true"})," and set ",(0,t.jsx)(s.code,{children:"sslHost"})," to force requests to use ",(0,t.jsx)(s.code,{children:"SSLHost"})," regardless of whether they already use SSL."]}),"\n",(0,t.jsx)(s.h3,{id:"stsseconds",children:(0,t.jsx)(s.code,{children:"stsSeconds"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"stsSeconds"})," is the max-age of the ",(0,t.jsx)(s.code,{children:"Strict-Transport-Security"})," header.\nIf set to ",(0,t.jsx)(s.code,{children:"0"}),", the header is not set."]}),"\n",(0,t.jsx)(s.h3,{id:"stsincludesubdomains",children:(0,t.jsx)(s.code,{children:"stsIncludeSubdomains"})}),"\n",(0,t.jsxs)(s.p,{children:["If the ",(0,t.jsx)(s.code,{children:"stsIncludeSubdomains"})," is set to ",(0,t.jsx)(s.code,{children:"true"}),", the ",(0,t.jsx)(s.code,{children:"includeSubDomains"})," directive is appended to the ",(0,t.jsx)(s.code,{children:"Strict-Transport-Security"})," header."]}),"\n",(0,t.jsx)(s.h3,{id:"stspreload",children:(0,t.jsx)(s.code,{children:"stsPreload"})}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"stsPreload"})," to ",(0,t.jsx)(s.code,{children:"true"})," to have the ",(0,t.jsx)(s.code,{children:"preload"})," flag appended to the ",(0,t.jsx)(s.code,{children:"Strict-Transport-Security"})," header."]}),"\n",(0,t.jsx)(s.h3,{id:"forcestsheader",children:(0,t.jsx)(s.code,{children:"forceSTSHeader"})}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"forceSTSHeader"})," to ",(0,t.jsx)(s.code,{children:"true"})," to add the STS header even when the connection is HTTP."]}),"\n",(0,t.jsx)(s.h3,{id:"framedeny",children:(0,t.jsx)(s.code,{children:"frameDeny"})}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"frameDeny"})," to ",(0,t.jsx)(s.code,{children:"true"})," to add the ",(0,t.jsx)(s.code,{children:"X-Frame-Options"})," header with the value of ",(0,t.jsx)(s.code,{children:"DENY"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"customframeoptionsvalue",children:(0,t.jsx)(s.code,{children:"customFrameOptionsValue"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"customFrameOptionsValue"})," allows the ",(0,t.jsx)(s.code,{children:"X-Frame-Options"})," header value to be set with a custom value.\nThis overrides the ",(0,t.jsx)(s.code,{children:"FrameDeny"})," option."]}),"\n",(0,t.jsx)(s.h3,{id:"contenttypenosniff",children:(0,t.jsx)(s.code,{children:"contentTypeNosniff"})}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"contentTypeNosniff"})," to true to add the ",(0,t.jsx)(s.code,{children:"X-Content-Type-Options"})," header with the value ",(0,t.jsx)(s.code,{children:"nosniff"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"browserxssfilter",children:(0,t.jsx)(s.code,{children:"browserXssFilter"})}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"browserXssFilter"})," to true to add the ",(0,t.jsx)(s.code,{children:"X-XSS-Protection"})," header with the value ",(0,t.jsx)(s.code,{children:"1; mode=block"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"custombrowserxssvalue",children:(0,t.jsx)(s.code,{children:"customBrowserXSSValue"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"customBrowserXssValue"})," option allows the ",(0,t.jsx)(s.code,{children:"X-XSS-Protection"})," header value to be set with a custom value.\nThis overrides the ",(0,t.jsx)(s.code,{children:"BrowserXssFilter"})," option."]}),"\n",(0,t.jsx)(s.h3,{id:"contentsecuritypolicy",children:(0,t.jsx)(s.code,{children:"contentSecurityPolicy"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"contentSecurityPolicy"})," option allows the ",(0,t.jsx)(s.code,{children:"Content-Security-Policy"})," header value to be set with a custom value."]}),"\n",(0,t.jsx)(s.h3,{id:"contentsecuritypolicyreportonly",children:(0,t.jsx)(s.code,{children:"contentSecurityPolicyReportOnly"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"contentSecurityPolicyReportOnly"})," option allows the ",(0,t.jsx)(s.code,{children:"Content-Security-Policy-Report-Only"})," header value to be set with a custom value."]}),"\n",(0,t.jsx)(s.h3,{id:"publickey",children:(0,t.jsx)(s.code,{children:"publicKey"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"publicKey"})," implements HPKP to prevent MITM attacks with forged certificates."]}),"\n",(0,t.jsx)(s.h3,{id:"referrerpolicy",children:(0,t.jsx)(s.code,{children:"referrerPolicy"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"referrerPolicy"})," allows sites to control whether browsers forward the ",(0,t.jsx)(s.code,{children:"Referer"})," header to other sites."]}),"\n",(0,t.jsx)(s.h3,{id:"featurepolicy",children:(0,t.jsx)(s.code,{children:"featurePolicy"})}),"\n",(0,t.jsx)(s.p,{children:"!!! warning"}),"\n",(0,t.jsxs)(s.p,{children:["Deprecated in favor of ",(0,t.jsx)(s.a,{href:"#permissionsPolicy",children:(0,t.jsx)(s.code,{children:"permissionsPolicy"})})]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"featurePolicy"})," allows sites to control browser features."]}),"\n",(0,t.jsx)(s.h3,{id:"permissionspolicy",children:(0,t.jsx)(s.code,{children:"permissionsPolicy"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"permissionsPolicy"})," allows sites to control browser features."]}),"\n",(0,t.jsx)(s.h3,{id:"isdevelopment",children:(0,t.jsx)(s.code,{children:"isDevelopment"})}),"\n",(0,t.jsxs)(s.p,{children:["Set ",(0,t.jsx)(s.code,{children:"isDevelopment"})," to ",(0,t.jsx)(s.code,{children:"true"})," when developing to mitigate the unwanted effects of the ",(0,t.jsx)(s.code,{children:"AllowedHosts"}),", SSL, and STS options.\nUsually testing takes place using HTTP, not HTTPS, and on ",(0,t.jsx)(s.code,{children:"localhost"}),", not your production domain.\nIf you would like your development environment to mimic production with complete Host blocking, SSL redirects, and STS headers, leave this as ",(0,t.jsx)(s.code,{children:"false"}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(i,{...e})}):i(e)}},8416:(e,s,r)=>{r.d(s,{A:()=>d});const d=r.p+"assets/images/headers-670622302fc689690eaa6d77a8888832.png"},8453:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>a});var d=r(6540);const t={},n=d.createContext(t);function o(e){const s=d.useContext(n);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),d.createElement(n.Provider,{value:s},e.children)}}}]);