"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[938],{2264:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"https/spiffe","title":"Mesh SPIFFE Documentation","description":"Learn how to configure Mesh to use SPIFFE. Read the technical documentation.","source":"@site/docs/https/spiffe.md","sourceDirName":"https","slug":"/https/spiffe","permalink":"/doc/docs/https/spiffe","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/https/spiffe.md","tags":[],"version":"current","frontMatter":{"title":"Mesh SPIFFE Documentation","description":"Learn how to configure Mesh to use SPIFFE. Read the technical documentation."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh Proxy  HTTPS & TLS Overview |Mesh Docs","permalink":"/doc/docs/https/overview"},"next":{"title":"Mesh Tailscale Documentation","permalink":"/doc/docs/https/tailscale"}}');var r=n(4848),s=n(8453);const i={title:"Mesh SPIFFE Documentation",description:"Learn how to configure Mesh to use SPIFFE. Read the technical documentation."},a="SPIFFE",c={},d=[{value:"Configuration",id:"configuration",level:2},{value:"General",id:"general",level:3},{value:"Workload API",id:"workload-api",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"spiffe",children:"SPIFFE"})}),"\n",(0,r.jsx)(t.p,{children:"Secure the backend connection with SPIFFE."}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://spiffe.io/docs/latest/spiffe-about/overview/",children:"SPIFFE"})," (Secure Production Identity Framework For Everyone),\nprovides a secure identity in the form of a specially crafted X.509 certificate,\nto every workload in an environment."]}),"\n",(0,r.jsx)(t.p,{children:"Mesh is able to connect to the Workload API to obtain an x509-SVID used to secure the connection with SPIFFE enabled backends."}),"\n",(0,r.jsx)(t.h2,{id:"configuration",children:"Configuration"}),"\n",(0,r.jsx)(t.h3,{id:"general",children:"General"}),"\n",(0,r.jsxs)(t.p,{children:["Enabling SPIFFE is part of the ",(0,r.jsx)(t.a,{href:"/doc/docs/getting-started/configuration-overview#the-static-configuration",children:"static configuration"}),".\nIt can be defined by using a file (YAML or TOML) or CLI arguments."]}),"\n",(0,r.jsx)(t.h3,{id:"workload-api",children:"Workload API"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"workloadAPIAddr"})," configuration defines the address of the SPIFFE ",(0,r.jsx)(t.a,{href:"https://spiffe.io/docs/latest/spiffe-about/spiffe-concepts/#spiffe-workload-api",children:"Workload API"}),"."]}),"\n",(0,r.jsx)(t.p,{children:'!!! info "Enabling SPIFFE in ServersTransports"'}),"\n",(0,r.jsxs)(t.p,{children:["Enabling SPIFFE does not imply that backend connections are going to use it automatically.\nEach ",(0,r.jsx)(t.a,{href:"/doc/docs/routing/services/#serverstransport_1",children:"ServersTransport"})," or ",(0,r.jsx)(t.a,{href:"/doc/docs/routing/services/#serverstransport_2",children:"TCPServersTransport"}),",\nthat is meant to be secured with SPIFFE,\nmust explicitly enable it (see ",(0,r.jsx)(t.a,{href:"/doc/docs/routing/services/#spiffe",children:"SPIFFE with ServersTransport"})," or ",(0,r.jsx)(t.a,{href:"/doc/docs/routing/services/#spiffe_1",children:"SPIFFE with TCPServersTransport"}),")."]}),"\n",(0,r.jsx)(t.p,{children:'!!! warning "SPIFFE can cause Mesh to stall"\nWhen using SPIFFE,\nMesh will wait for the first SVID to be delivered before starting.\nIf Mesh is hanging when waiting on SPIFFE SVID delivery,\nplease double check that it is correctly registered as workload in your SPIFFE infrastructure.'}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'tab="File (YAML)"',children:"## Static configuration\nspiffe:\n    workloadAPIAddr: localhost\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-toml",metastring:'tab="File (TOML)"',children:"## Static configuration\n[spiffe]\n    workloadAPIAddr: localhost\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",metastring:'tab="CLI"',children:"## Static configuration\n--spiffe.workloadAPIAddr=localhost\n"})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>a});var o=n(6540);const r={},s=o.createContext(r);function i(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);