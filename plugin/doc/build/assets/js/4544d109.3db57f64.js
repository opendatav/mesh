"use strict";(self.webpackChunkdoc=self.webpackChunkdoc||[]).push([[1986],{5733:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"reference/routing-configuration/http/middlewares/passtlsclientcert","title":"Mesh PassTLSClientCert Documentation","description":"In Mesh Proxy\'s HTTP middleware, the PassTLSClientCert adds selected data from passed client TLS certificates to headers. Read the technical documentation.","source":"@site/docs/reference/routing-configuration/http/middlewares/passtlsclientcert.md","sourceDirName":"reference/routing-configuration/http/middlewares","slug":"/reference/routing-configuration/http/middlewares/passtlsclientcert","permalink":"/doc/docs/reference/routing-configuration/http/middlewares/passtlsclientcert","draft":false,"unlisted":false,"editUrl":"https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/reference/routing-configuration/http/middlewares/passtlsclientcert.md","tags":[],"version":"current","frontMatter":{"title":"Mesh PassTLSClientCert Documentation","description":"In Mesh Proxy\'s HTTP middleware, the PassTLSClientCert adds selected data from passed client TLS certificates to headers. Read the technical documentation."},"sidebar":"tutorialSidebar","previous":{"title":"Mesh Proxy Middleware Overview","permalink":"/doc/docs/reference/routing-configuration/http/middlewares/overview"},"next":{"title":"Mesh RateLimit Documentation","permalink":"/doc/docs/reference/routing-configuration/http/middlewares/ratelimit"}}');var i=n(4848),r=n(8453);const l={title:"Mesh PassTLSClientCert Documentation",description:"In Mesh Proxy's HTTP middleware, the PassTLSClientCert adds selected data from passed client TLS certificates to headers. Read the technical documentation."},c=void 0,a={},d=[{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"General Information",id:"general-information",level:2},{value:"Configuration Options",id:"configuration-options",level:2},{value:"pem",id:"pem",level:3},{value:"Data Format",id:"data-format",level:4},{value:"Header size",id:"header-size",level:4},{value:"info",id:"info",level:3},{value:"Data Format",id:"data-format-1",level:4}];function o(e){const t={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"passTLSClientCert"})," middleware adds the selected data from the passed client TLS certificate to a header."]}),"\n",(0,i.jsx)(t.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,i.jsxs)(t.p,{children:["Pass the pem in the ",(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert"})," header:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'tab="Structured (YAML)"',children:"# Pass the pem in the `X-Forwarded-Tls-Client-Cert` header.\nhttp:\n  middlewares:\n    test-passtlsclientcert:\n      passTLSClientCert:\n        pem: true\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-toml",metastring:'tab="Structured (TOML)"',children:"# Pass the pem in the `X-Forwarded-Tls-Client-Cert` header.\n[http.middlewares]\n  [http.middlewares.test-passtlsclientcert.passTLSClientCert]\n    pem = true\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'tab="Labels"',children:'# Pass the pem in the `X-Forwarded-Tls-Client-Cert` header.\nlabels:\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.pem=true"\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",metastring:'tab="Tags"',children:'// Pass the pem in the `X-Forwarded-Tls-Client-Cert` header\n{\n  "Tags": [\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.pem=true"\n  ]\n}\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"apiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-passtlsclientcert\nspec:\n  passTLSClientCert:\n    pem: true\n"})}),"\n",(0,i.jsxs)(t.p,{children:['??? example "Pass the pem in the ',(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert"}),' header"']}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'tab="Structured (YAML)"',children:"# Pass all the available info in the `X-Forwarded-Tls-Client-Cert-Info` header\nhttp:\n  middlewares:\n    test-passtlsclientcert:\n      passTLSClientCert:\n        info:\n          notAfter: true\n          notBefore: true\n          sans: true\n          subject:\n            country: true\n            province: true\n            locality: true\n            organization: true\n            organizationalUnit: true\n            commonName: true\n            serialNumber: true\n            domainComponent: true\n          issuer:\n            country: true\n            province: true\n            locality: true\n            organization: true\n            commonName: true\n            serialNumber: true\n            domainComponent: true\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-toml",metastring:'tab="Structured (TOML)"',children:"# Pass all the available info in the `X-Forwarded-Tls-Client-Cert-Info` header\n[http.middlewares]\n  [http.middlewares.test-passtlsclientcert.passTLSClientCert]\n    [http.middlewares.test-passtlsclientcert.passTLSClientCert.info]\n      notAfter = true\n      notBefore = true\n      sans = true\n      [http.middlewares.test-passtlsclientcert.passTLSClientCert.info.subject]\n        country = true\n        province = true\n        locality = true\n        organization = true\n        organizationalUnit = true\n        commonName = true\n        serialNumber = true\n        domainComponent = true\n      [http.middlewares.test-passtlsclientcert.passTLSClientCert.info.issuer]\n        country = true\n        province = true\n        locality = true\n        organization = true\n        commonName = true\n        serialNumber = true\n        domainComponent = true\n"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'tab="Labels"',children:'# Pass all the available info in the `X-Forwarded-Tls-Client-Cert-Info` header\nlabels:\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.notafter=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.notbefore=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.sans=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.serialnumber=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.commonname=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.country=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.domaincomponent=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.locality=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.organization=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.organizationalunit=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.province=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.serialnumber=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.commonname=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.country=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.domaincomponent=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.locality=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.organization=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.province=true"\n  - "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.serialnumber=true"\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",metastring:'tab="Tags"',children:'// Pass all the available info in the `X-Forwarded-Tls-Client-Cert-Info` header\n{\n  //...\n  "Tags" : [\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.notafter=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.notbefore=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.sans=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.commonname=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.country=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.domaincomponent=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.locality=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.organization=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.organizationalunit=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.province=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.subject.serialnumber=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.commonname=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.country=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.domaincomponent=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.locality=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.organization=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.province=true",\n    "Mesh.http.middlewares.test-passtlsclientcert.passtlsclientcert.info.issuer.serialnumber=true"\n  ]\n}\n'})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-yaml",metastring:'tab="Kubernetes"',children:"# Pass all the available info in the `X-Forwarded-Tls-Client-Cert-Info` header\napiVersion: Mesh.io/v1alpha1\nkind: Middleware\nmetadata:\n  name: test-passtlsclientcert\nspec:\n  passTLSClientCert:\n    info:\n      notAfter: true\n      notBefore: true\n      sans: true\n      subject:\n        country: true\n        province: true\n        locality: true\n        organization: true\n        organizationalUnit: true\n        commonName: true\n        serialNumber: true\n        domainComponent: true\n      issuer:\n        country: true\n        province: true\n        locality: true\n        organization: true\n        commonName: true\n        serialNumber: true\n        domainComponent: true\n"})}),"\n",(0,i.jsx)(t.h2,{id:"general-information",children:"General Information"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"passTLSClientCert"})," can add two headers to the request:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert"})," that contains the pem."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert-Info"})," that contains all the selected certificate information in an escaped string."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"!!! info"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert-Info"})," header value is a string that has been escaped in order to be a valid URL query."]}),"\n",(0,i.jsxs)(t.li,{children:["These options only work accordingly to the MutualTLS configuration. i.e, only the certificates that match the ",(0,i.jsx)(t.code,{children:"clientAuth.clientAuthType"})," policy are passed."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:'??? example "Example of a complete certificate and explaining each of the middleware options"'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-txt",children:"Certificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 1 (0x1)\n        Signature Algorithm: sha1WithRSAEncryption\n        Issuer: DC=org, DC=cheese, O=Cheese, O=Cheese 2, OU=Simple Signing Section, OU=Simple Signing Section 2, CN=Simple Signing CA, CN=Simple Signing CA 2, C=FR, C=US, L=TOULOUSE, L=LYON, ST=Signing State, ST=Signing State 2/emailAddress=simple@signing.com/emailAddress=simple2@signing.com\n        Validity\n            Not Before: Dec  6 11:10:16 2018 GMT\n            Not After : Dec  5 11:10:16 2020 GMT\n        Subject: DC=org, DC=cheese, O=Cheese, O=Cheese 2, OU=Simple Signing Section, OU=Simple Signing Section 2, CN=*.example.org, CN=*.example.com, C=FR, C=US, L=TOULOUSE, L=LYON, ST=Cheese org state, ST=Cheese com statemailAddress=cert@example.org/emailAddress=cert@sexample.com\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                RSA Public-Key: (2048 bit)\n                Modulus:\n                    00:de:77:fa:8d:03:70:30:39:dd:51:1b:cc:60:db:\n                    a9:5a:13:b1:af:fe:2c:c6:38:9b:88:0a:0f:8e:d9:\n                    1b:a1:1d:af:0d:66:e4:13:5b:bc:5d:36:92:d7:5e:\n                    d0:fa:88:29:d3:78:e1:81:de:98:b2:a9:22:3f:bf:\n                    8a:af:12:92:63:d4:a9:c3:f2:e4:7e:d2:dc:a2:c5:\n                    39:1c:7a:eb:d7:12:70:63:2e:41:47:e0:f0:08:e8:\n                    dc:be:09:01:ec:28:09:af:35:d7:79:9c:50:35:d1:\n                    6b:e5:87:7b:34:f6:d2:31:65:1d:18:42:69:6c:04:\n                    11:83:fe:44:ae:90:92:2d:0b:75:39:57:62:e6:17:\n                    2f:47:2b:c7:53:dd:10:2d:c9:e3:06:13:d2:b9:ba:\n                    63:2e:3c:7d:83:6b:d6:89:c9:cc:9d:4d:bf:9f:e8:\n                    a3:7b:da:c8:99:2b:ba:66:d6:8e:f8:41:41:a0:c9:\n                    d0:5e:c8:11:a4:55:4a:93:83:87:63:04:63:41:9c:\n                    fb:68:04:67:c2:71:2f:f2:65:1d:02:5d:15:db:2c:\n                    d9:04:69:85:c2:7d:0d:ea:3b:ac:85:f8:d4:8f:0f:\n                    c5:70:b2:45:e1:ec:b2:54:0b:e9:f7:82:b4:9b:1b:\n                    2d:b9:25:d4:ab:ca:8f:5b:44:3e:15:dd:b8:7f:b7:\n                    ee:f9\n                Exponent: 65537 (0x10001)\n        X509v3 extensions:\n            X509v3 Key Usage: critical\n                Digital Signature, Key Encipherment\n            X509v3 Basic Constraints:\n                CA:FALSE\n            X509v3 Extended Key Usage:\n                TLS Web Server Authentication, TLS Web Client Authentication\n            X509v3 Subject Key Identifier:\n                94:BA:73:78:A2:87:FB:58:28:28:CF:98:3B:C2:45:70:16:6E:29:2F\n            X509v3 Authority Key Identifier:\n                keyid:1E:52:A2:E8:54:D5:37:EB:D5:A8:1D:E4:C2:04:1D:37:E2:F7:70:03\n\n            X509v3 Subject Alternative Name:\n                DNS:*.example.org, DNS:*.example.net, DNS:*.example.com, IP Address:10.0.1.0, IP Address:10.0.1.2, email:test@example.org, email:test@example.net\n    Signature Algorithm: sha1WithRSAEncryption\n        76:6b:05:b0:0e:34:11:b1:83:99:91:dc:ae:1b:e2:08:15:8b:\n        16:b2:9b:27:1c:02:ac:b5:df:1b:d0:d0:75:a4:2b:2c:5c:65:\n        ed:99:ab:f7:cd:fe:38:3f:c3:9a:22:31:1b:ac:8c:1c:c2:f9:\n        5d:d4:75:7a:2e:72:c7:85:a9:04:af:9f:2a:cc:d3:96:75:f0:\n        8e:c7:c6:76:48:ac:45:a4:b9:02:1e:2f:c0:15:c4:07:08:92:\n        cb:27:50:67:a1:c8:05:c5:3a:b3:a6:48:be:eb:d5:59:ab:a2:\n        1b:95:30:71:13:5b:0a:9a:73:3b:60:cc:10:d0:6a:c7:e5:d7:\n        8b:2f:f9:2e:98:f2:ff:81:14:24:09:e3:4b:55:57:09:1a:22:\n        74:f1:f6:40:13:31:43:89:71:0a:96:1a:05:82:1f:83:3a:87:\n        9b:17:25:ef:5a:55:f2:2d:cd:0d:4d:e4:81:58:b6:e3:8d:09:\n        62:9a:0c:bd:e4:e5:5c:f0:95:da:cb:c7:34:2c:34:5f:6d:fc:\n        60:7b:12:5b:86:fd:df:21:89:3b:48:08:30:bf:67:ff:8c:e6:\n        9b:53:cc:87:36:47:70:40:3b:d9:90:2a:d2:d2:82:c6:9c:f5:\n        d1:d8:e0:e6:fd:aa:2f:95:7e:39:ac:fc:4e:d4:ce:65:b3:ec:\n        c6:98:8a:31\n-----BEGIN CERTIFICATE-----\nMIIGWjCCBUKgAwIBAgIBATANBgkqhkiG9w0BAQUFADCCAYQxEzARBgoJkiaJk/Is\nZAEZFgNvcmcxFjAUBgoJkiaJk/IsZAEZFgZjaGVlc2UxDzANBgNVBAoMBkNoZWVz\nZTERMA8GA1UECgwIQ2hlZXNlIDIxHzAdBgNVBAsMFlNpbXBsZSBTaWduaW5nIFNl\nY3Rpb24xITAfBgNVBAsMGFNpbXBsZSBTaWduaW5nIFNlY3Rpb24gMjEaMBgGA1UE\nAwwRU2ltcGxlIFNpZ25pbmcgQ0ExHDAaBgNVBAMME1NpbXBsZSBTaWduaW5nIENB\nIDIxCzAJBgNVBAYTAkZSMQswCQYDVQQGEwJVUzERMA8GA1UEBwwIVE9VTE9VU0Ux\nDTALBgNVBAcMBExZT04xFjAUBgNVBAgMDVNpZ25pbmcgU3RhdGUxGDAWBgNVBAgM\nD1NpZ25pbmcgU3RhdGUgMjEhMB8GCSqGSIb3DQEJARYSc2ltcGxlQHNpZ25pbmcu\nY29tMSIwIAYJKoZIhvcNAQkBFhNzaW1wbGUyQHNpZ25pbmcuY29tMB4XDTE4MTIw\nNjExMTAxNloXDTIwMTIwNTExMTAxNlowggF2MRMwEQYKCZImiZPyLGQBGRYDb3Jn\nMRYwFAYKCZImiZPyLGQBGRYGY2hlZXNlMQ8wDQYDVQQKDAZDaGVlc2UxETAPBgNV\nBAoMCENoZWVzZSAyMR8wHQYDVQQLDBZTaW1wbGUgU2lnbmluZyBTZWN0aW9uMSEw\nHwYDVQQLDBhTaW1wbGUgU2lnbmluZyBTZWN0aW9uIDIxFTATBgNVBAMMDCouY2hl\nZXNlLm9yZzEVMBMGA1UEAwwMKi5jaGVlc2UuY29tMQswCQYDVQQGEwJGUjELMAkG\nA1UEBhMCVVMxETAPBgNVBAcMCFRPVUxPVVNFMQ0wCwYDVQQHDARMWU9OMRkwFwYD\nVQQIDBBDaGVlc2Ugb3JnIHN0YXRlMRkwFwYDVQQIDBBDaGVlc2UgY29tIHN0YXRl\nMR4wHAYJKoZIhvcNAQkBFg9jZXJ0QGNoZWVzZS5vcmcxHzAdBgkqhkiG9w0BCQEW\nEGNlcnRAc2NoZWVzZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB\nAQDed/qNA3AwOd1RG8xg26laE7Gv/izGOJuICg+O2RuhHa8NZuQTW7xdNpLXXtD6\niCnTeOGB3piyqSI/v4qvEpJj1KnD8uR+0tyixTkceuvXEnBjLkFH4PAI6Ny+CQHs\nKAmvNdd5nFA10Wvlh3s09tIxZR0YQmlsBBGD/kSukJItC3U5V2LmFy9HK8dT3RAt\nyeMGE9K5umMuPH2Da9aJycydTb+f6KN72siZK7pm1o74QUGgydBeyBGkVUqTg4dj\nBGNBnPtoBGfCcS/yZR0CXRXbLNkEaYXCfQ3qO6yF+NSPD8VwskXh7LJUC+n3grSb\nGy25JdSryo9bRD4V3bh/t+75AgMBAAGjgeAwgd0wDgYDVR0PAQH/BAQDAgWgMAkG\nA1UdEwQCMAAwHQYDVR0lBBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMB0GA1UdDgQW\nBBSUunN4oof7WCgoz5g7wkVwFm4pLzAfBgNVHSMEGDAWgBQeUqLoVNU369WoHeTC\nBB034vdwAzBhBgNVHREEWjBYggwqLmNoZWVzZS5vcmeCDCouY2hlZXNlLm5ldIIM\nKi5jaGVlc2UuY29thwQKAAEAhwQKAAECgQ90ZXN0QGNoZWVzZS5vcmeBD3Rlc3RA\nY2hlZXNlLm5ldDANBgkqhkiG9w0BAQUFAAOCAQEAdmsFsA40EbGDmZHcrhviCBWL\nFrKbJxwCrLXfG9DQdaQrLFxl7Zmr983+OD/DmiIxG6yMHML5XdR1ei5yx4WpBK+f\nKszTlnXwjsfGdkisRaS5Ah4vwBXEBwiSyydQZ6HIBcU6s6ZIvuvVWauiG5UwcRNb\nCppzO2DMENBqx+XXiy/5Lpjy/4EUJAnjS1VXCRoidPH2QBMxQ4lxCpYaBYIfgzqH\nmxcl71pV8i3NDU3kgVi2440JYpoMveTlXPCV2svHNCw0X238YHsSW4b93yGJO0gI\n-----END CERTIFICATE-----\n"})}),"\n",(0,i.jsx)(t.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Field"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Default"}),(0,i.jsx)(t.th,{style:{textAlign:"left"},children:"Required"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"pem"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Fills the ",(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert"})," header with the certificate information.",(0,i.jsx)("br",{})," More information ",(0,i.jsx)(t.a,{href:"#pem",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.serialNumber"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"Serial Number"})," of the certificate.",(0,i.jsx)("br",{})," More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.notAfter"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"Not After"})," information from the ",(0,i.jsx)(t.code,{children:"Validity"})," part. ",(0,i.jsx)("br",{})," More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.notBefore"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"Not Before"})," information from the ",(0,i.jsx)(t.code,{children:"Validity"})," part. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.sans"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"Subject Alternative Name"})," information from the ",(0,i.jsx)(t.code,{children:"Subject Alternative Name"})," part. ",(0,i.jsx)("br",{})," More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["The ",(0,i.jsx)(t.code,{children:"info.subject"})," selects the specific client certificate subject details you want to add to the ",(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert-Info"})," header. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.country"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"country"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"C"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.province"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"province"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"ST"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.locality"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"locality"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"L"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.organization"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"organization"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"O"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.organizationalUnit"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"organizationalUnit"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"OU"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.commonName"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"commonName"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"CN"})," key."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.serialNumber"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"serialNumber"})," information into the subject.",(0,i.jsx)("br",{})," The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"SN"})," key."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.subject.domainComponent"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"domainComponent"})," information into the subject.",(0,i.jsx)("br",{}),"The data is taken from the subject part with the ",(0,i.jsx)(t.code,{children:"DC"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["The ",(0,i.jsx)(t.code,{children:"info.issuer"})," selects the specific client certificate issuer details you want to add to the ",(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert-Info"})," header. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.country"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"country"})," information into the issuer.",(0,i.jsx)("br",{})," The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"C"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.province"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"province"})," information into the issuer.",(0,i.jsx)("br",{}),"The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"ST"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.locality"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"locality"})," information into the issuer.",(0,i.jsx)("br",{})," The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"L"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.organization"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"organization"})," information into the issuer.",(0,i.jsx)("br",{})," The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"O"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.commonName"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"commonName"})," information into the issuer.",(0,i.jsx)("br",{})," The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"CN"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.serialNumber"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"serialNumber"})," information into the issuer.",(0,i.jsx)("br",{})," The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"SN"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{style:{textAlign:"left"},children:(0,i.jsx)(t.code,{children:"info.issuer.domainComponent"})}),(0,i.jsxs)(t.td,{style:{textAlign:"left"},children:["Add the ",(0,i.jsx)(t.code,{children:"domainComponent"})," information into the issuer.",(0,i.jsx)("br",{})," The data is taken from the issuer part with the ",(0,i.jsx)(t.code,{children:"DC"})," key. ",(0,i.jsx)("br",{}),"More information about ",(0,i.jsx)(t.code,{children:"info"})," ",(0,i.jsx)(t.a,{href:"#info",children:"here"}),"."]}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"false"}),(0,i.jsx)(t.td,{style:{textAlign:"left"},children:"No"})]})]})]}),"\n",(0,i.jsx)(t.h3,{id:"pem",children:"pem"}),"\n",(0,i.jsx)(t.h4,{id:"data-format",children:"Data Format"}),"\n",(0,i.jsxs)(t.p,{children:["The delimiters and ",(0,i.jsx)(t.code,{children:"\\n"})," will be removed.",(0,i.jsx)(t.br,{}),"\n",'If there are more than one certificate, they are separated by a "',(0,i.jsx)(t.code,{children:","}),'".']}),"\n",(0,i.jsx)(t.h4,{id:"header-size",children:"Header size"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert"})," header value could exceed the web server header size limit"]}),"\n",(0,i.jsxs)(t.p,{children:["The header size limit of web servers is commonly between 4kb and 8kb.",(0,i.jsx)(t.br,{}),"\n","If that turns out to be a problem, and if reconfiguring the server to allow larger headers is not an option,\none can alleviate the problem by selecting only the interesting parts of the cert,\nthrough the use of the ",(0,i.jsx)(t.code,{children:"info"})," options described below. (And by setting ",(0,i.jsx)(t.code,{children:"pem"})," to false)."]}),"\n",(0,i.jsx)(t.h3,{id:"info",children:"info"}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"info"})," option selects the specific client certificate details you want to add to the ",(0,i.jsx)(t.code,{children:"X-Forwarded-Tls-Client-Cert-Info"})," header."]}),"\n",(0,i.jsx)(t.h4,{id:"data-format-1",children:"Data Format"}),"\n",(0,i.jsx)(t.p,{children:"The value of the header is an escaped concatenation of all the selected certificate details.\nUnless specified otherwise, all the header values examples are shown unescaped, for readability."}),"\n",(0,i.jsxs)(t.p,{children:["If there are more than one certificate, they are separated by a ",(0,i.jsx)(t.code,{children:","}),"."]}),"\n",(0,i.jsx)(t.p,{children:"The following example shows such a concatenation, when all the available fields are selected:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-text",children:'Subject="DC=org,DC=cheese,C=FR,C=US,ST=Cheese org state,ST=Cheese com state,L=TOULOUSE,L=LYON,O=Cheese,O=Cheese 2,CN=*.example.com";Issuer="DC=org,DC=cheese,C=FR,C=US,ST=Signing State,ST=Signing State 2,L=TOULOUSE,L=LYON,O=Cheese,O=Cheese 2,CN=Simple Signing CA 2";NB="1544094616";NA="1607166616";SAN="*.example.org,*.example.net,*.example.com,test@example.org,test@example.net,10.0.1.0,10.0.1.2"\n'})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>c});var s=n(6540);const i={},r=s.createContext(i);function l(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);