<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-reference/install-configuration/tls/certificate-resolvers/acme" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Mesh &amp; ACME Certificates Resolver | 文档中心</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mesh &amp; ACME Certificates Resolver | 文档中心"><meta data-rh="true" name="description" content="Automatic Certificate Management Environment using Let&#x27;s Encrypt."><meta data-rh="true" property="og:description" content="Automatic Certificate Management Environment using Let&#x27;s Encrypt."><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme"><link data-rh="true" rel="alternate" href="https://github.com/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"动态配置管理","item":"https://github.com/doc/docs/category/动态配置管理"},{"@type":"ListItem","position":2,"name":"Mesh & ACME Certificates Resolver","item":"https://github.com/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme"}]}</script><link rel="alternate" type="application/rss+xml" href="/doc/blog/rss.xml" title="文档中心 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/blog/atom.xml" title="文档中心 Atom Feed"><link rel="stylesheet" href="/doc/assets/css/styles.2eab34b2.css">
<script src="/doc/assets/js/runtime~main.2bae97f1.js" defer="defer"></script>
<script src="/doc/assets/js/main.1caca4db.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/doc/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/logo.png" alt="金融服务网关Icon" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/logo.png" alt="金融服务网关Icon" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">金融服务网关</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/doc/docs/intro">使用文档</a><a class="navbar__item navbar__link" href="/doc/blog">技术博客</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/opendatav/mesh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/intro">快速指引</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/开始使用">开始使用</a><button aria-label="Expand sidebar category &#x27;开始使用&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/doc/docs/category/动态配置管理">动态配置管理</a><button aria-label="Collapse sidebar category &#x27;动态配置管理&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/doc/docs/reference/dynamic-configuration/consul-catalog">dynamic-configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/doc/docs/reference/install-configuration/api-dashboard">install-configuration</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/api-dashboard">Mesh API &amp; Dashboard Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/boot-environment">Mesh Configuration Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/cli-options-list">cli-options-list</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/entrypoints">Mesh EntryPoints Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/doc/docs/reference/install-configuration/observability/healthcheck">observability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/doc/docs/reference/install-configuration/providers/docker">providers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme">tls</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme">certificate-resolvers</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc/docs/reference/install-configuration/tls/certificate-resolvers/acme">Mesh &amp; ACME Certificates Resolver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/tls/certificate-resolvers/overview">Certificates Resolver</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/tls/certificate-resolvers/tailscale">Mesh Tailscale Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/reference/install-configuration/tls/spiffe">Mesh SPIFFE Documentation</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/doc/docs/reference/routing-configuration/dynamic-configuration-methods">routing-configuration</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/doc/docs/reference/static-configuration/cli-ref">static-configuration</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/路由和负载均衡">路由和负载均衡</a><button aria-label="Expand sidebar category &#x27;路由和负载均衡&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/代码贡献">代码贡献</a><button aria-label="Expand sidebar category &#x27;代码贡献&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/版本兼容">版本兼容</a><button aria-label="Expand sidebar category &#x27;版本兼容&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/https协议">HTTPS协议</a><button aria-label="Expand sidebar category &#x27;HTTPS协议&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/includes/kubernetes-requirements">includes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/">Mesh Proxy Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/middlewares/http/addprefix">middlewares</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/observability/access-logs">observability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/operations/api">operations</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/plugins/">Mesh Plugins Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/providers/consul-catalog">providers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/security/content-length">security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/user-guides/cert-manager">user-guides</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/doc/docs/category/动态配置管理"><span>动态配置管理</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">install-configuration</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">tls</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">certificate-resolvers</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Mesh &amp; ACME Certificates Resolver</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mesh &amp; ACME Certificates Resolver</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-example">Configuration Example<a href="#configuration-example" class="hash-link" aria-label="Direct link to Configuration Example" title="Direct link to Configuration Example">​</a></h2>
<p>Below is an example of a basic configuration for ACME in Mesh.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">entryPoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">websecure</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">certificatesResolvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myresolver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">email@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> acme.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">httpChallenge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># used during the challenge</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">entryPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span></code></pre></div></div>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[entryPoints]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [entryPoints.web]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address = &quot;:80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [entryPoints.websecure]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address = &quot;:443&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[certificatesResolvers.myresolver.acme]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  email = &quot;your-email@example.com&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  storage = &quot;acme.json&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [certificatesResolvers.myresolver.acme.httpChallenge]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # used during the challenge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entryPoint = &quot;web&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--entryPoints.web.address=:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--entryPoints.websecure.address=:443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.email=your-email@example.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.storage=acme.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># used during the challenge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.httpchallenge.entrypoint=web</span><br></span></code></pre></div></div>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Mesh entryPoints configuration for HTTP and HTTPS.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">entryPoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">websecure</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">certificatesResolvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myresolver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">email</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-email@example.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/data/acme.json&quot;</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic"># Path to store the certificate information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">httpChallenge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Entry point to use during the ACME HTTP-01 challenge.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">entryPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;web&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options">​</a></h2>
<p>ACME certificate resolvers have the following configuration options:</p>
<table><thead><tr><th style="text-align:left">Field</th><th style="text-align:left">Description</th><th style="text-align:left">Default</th><th style="text-align:left">Required</th></tr></thead><tbody><tr><td style="text-align:left"><code>acme.email</code></td><td style="text-align:left">Email address used for registration.</td><td style="text-align:left">&quot;&quot;</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><code>acme.caServer</code></td><td style="text-align:left">CA server to use.</td><td style="text-align:left"><a href="https://acme-v02.api.letsencrypt.org/directory" target="_blank" rel="noopener noreferrer">https://acme-v02.api.letsencrypt.org/directory</a></td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.preferredChain</code></td><td style="text-align:left">Preferred chain to use. If the CA offers multiple certificate chains, prefer the chain with an issuer matching this Subject Common Name. If no match, the default offered chain will be used.</td><td style="text-align:left">&quot;&quot;</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.keyType</code></td><td style="text-align:left">KeyType to use.</td><td style="text-align:left">&quot;RSA4096&quot;</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.eab</code></td><td style="text-align:left">Enable external account binding.</td><td style="text-align:left"></td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.eab.kid</code></td><td style="text-align:left">Key identifier from External CA.</td><td style="text-align:left">&quot;&quot;</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.eab.hmacEncoded</code></td><td style="text-align:left">HMAC key from External CA, should be in Base64 URL Encoding without padding format.</td><td style="text-align:left">&quot;&quot;</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.certificatesDuration</code></td><td style="text-align:left">The certificates&#x27; duration in hours, exclusively used to determine renewal dates.</td><td style="text-align:left">2160</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.clientTimeout</code></td><td style="text-align:left">Timeout for HTTP Client used to communicate with the ACME server.</td><td style="text-align:left">2m</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.clientResponseHeaderTimeout</code></td><td style="text-align:left">Timeout for response headers for HTTP Client used to communicate with the ACME server.</td><td style="text-align:left">30s</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge</code></td><td style="text-align:left">Enable DNS-01 challenge. More information <a href="#dnschallenge">here</a>.</td><td style="text-align:left">-</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge.provider</code></td><td style="text-align:left">DNS provider to use.</td><td style="text-align:left">&quot;&quot;</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge.resolvers</code></td><td style="text-align:left">DNS servers to resolve the FQDN authority.</td><td style="text-align:left">[]</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge.propagation.delayBeforeChecks</code></td><td style="text-align:left">By default, the provider will verify the TXT DNS challenge record before letting ACME verify. If <code>delayBeforeCheck</code> is greater than zero, this check is delayed for the configured duration in seconds. This is Useful if internal networks block external DNS queries.</td><td style="text-align:left">0s</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge.propagation.disableChecks</code></td><td style="text-align:left">Disables the challenge TXT record propagation checks, before notifying ACME that the DNS challenge is ready. Please note that disabling checks can prevent the challenge from succeeding.</td><td style="text-align:left">false</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge.propagation.requireAllRNS</code></td><td style="text-align:left">Enables the challenge TXT record to be propagated to all recursive nameservers. If you have disabled authoritative nameservers checks (with <code>propagation.disableANSChecks</code>), it is recommended to check all recursive nameservers instead.</td><td style="text-align:left">false</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.dnsChallenge.propagation.disableANSChecks</code></td><td style="text-align:left">Disables the challenge TXT record propagation checks against authoritative nameservers. This option will skip the propagation check against the nameservers of the authority (SOA). It should be used only if the nameservers of the authority are not reachable.</td><td style="text-align:left">false</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.httpChallenge</code></td><td style="text-align:left">Enable HTTP-01 challenge. More information <a href="#httpchallenge">here</a>.</td><td style="text-align:left"></td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.httpChallenge.entryPoint</code></td><td style="text-align:left">EntryPoint to use for the HTTP-01 challenges. Must be reachable by Let&#x27;s Encrypt through port 80</td><td style="text-align:left">&quot;&quot;</td><td style="text-align:left">Yes</td></tr><tr><td style="text-align:left"><code>acme.httpChallenge.delay</code></td><td style="text-align:left">The delay between the creation of the challenge and the validation. A value lower than or equal to zero means no delay.</td><td style="text-align:left">0</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.tlsChallenge</code></td><td style="text-align:left">Enable TLS-ALPN-01 challenge. Mesh must be reachable by Let&#x27;s Encrypt through port 443. More information <a href="#tlschallenge">here</a>.</td><td style="text-align:left">-</td><td style="text-align:left">No</td></tr><tr><td style="text-align:left"><code>acme.storage</code></td><td style="text-align:left">File path used for certificates storage.</td><td style="text-align:left">&quot;acme.json&quot;</td><td style="text-align:left">Yes</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="automatic-certificate-renewal">Automatic Certificate Renewal<a href="#automatic-certificate-renewal" class="hash-link" aria-label="Direct link to Automatic Certificate Renewal" title="Direct link to Automatic Certificate Renewal">​</a></h2>
<p>Mesh automatically tracks the expiry date of certificates it generates. Certificates that are no longer used may still be renewed, as Mesh does not currently check if the certificate is being used before renewing.</p>
<p>By default, Mesh manages 90-day certificates and starts renewing them 30 days before their expiry.
When using a certificate resolver that issues certificates with custom durations, the <code>certificatesDuration</code> option can be used to configure the certificates&#x27; duration.</p>
<p>!!! note
Certificates that are no longer used may still be renewed, as Mesh does not currently check if the certificate is being used before renewing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-different-acme-challenges">The Different ACME Challenges<a href="#the-different-acme-challenges" class="hash-link" aria-label="Direct link to The Different ACME Challenges" title="Direct link to The Different ACME Challenges">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dnschallenge">dnsChallenge<a href="#dnschallenge" class="hash-link" aria-label="Direct link to dnsChallenge" title="Direct link to dnsChallenge">​</a></h3>
<p>The DNS-01 challenge to generate and renew ACME certificates by provisioning a DNS record.</p>
<p>Mesh relies internally on <a href="https://go-acme.github.io/lego/" target="_blank" rel="noopener noreferrer" title="Link to Lego website">Lego</a> for ACME.
You can find the list of all the supported DNS providers in their <a href="https://go-acme.github.io/lego/dns/" target="_blank" rel="noopener noreferrer" title="Link to Lego DNS challenge documentation page">documentation</a>
with instructions about which environment variables need to be setup.</p>
<p>!!! note</p>
<p>CNAME are supported and even <a href="https://letsencrypt.org/2019/10/09/onboarding-your-customers-with-lets-encrypt-and-acme.html#the-advantages-of-a-cname" target="_blank" rel="noopener noreferrer" title="Link to The Advantages of a CNAME article">encouraged</a>.</p>
<p>If needed, CNAME support can be turned off with the following environment variable:</p>
<div class="language-env codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-env codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">LEGO_DISABLE_CNAME_SUPPORT=true</span><br></span></code></pre></div></div>
<p>??? warning &quot;Multiple DNS challenge&quot;</p>
<p>Multiple DNS challenge provider are not supported with Mesh, but you can use CNAME to handle that.
For example, if you have <code>example.org</code> (account foo) and <code>example.com</code> (account bar) you can create a CNAME on <code>example.org</code> called <code>_acme-challenge.example.org</code> pointing to <code>challenge.example.com</code>.
This way, you can obtain certificates for <code>example.com</code> with the foo account.</p>
<p>??? info &quot;<code>delayBeforeCheck</code>&quot;
By default, the <code>provider</code> verifies the TXT record <em>before</em> letting ACME verify.
You can delay this operation by specifying a delay (in seconds) with <code>delayBeforeCheck</code> (value must be greater than zero).
This option is useful when internal networks block external DNS queries.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tlschallenge"><code>tlsChallenge</code><a href="#tlschallenge" class="hash-link" aria-label="Direct link to tlschallenge" title="Direct link to tlschallenge">​</a></h3>
<p>Use the <code>TLS-ALPN-01</code> challenge to generate and renew ACME certificates by provisioning a TLS certificate.</p>
<p>As described on the Let&#x27;s Encrypt <a href="https://community.letsencrypt.org/t/support-for-ports-other-than-80-and-443/3419/72" target="_blank" rel="noopener noreferrer">community forum</a>,
when using the <code>TLS-ALPN-01</code> challenge, Mesh must be reachable by Let&#x27;s Encrypt through port 443.</p>
<p>??? example &quot;Configuring the <code>tlsChallenge</code>&quot;</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">certificatesResolvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myresolver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tlsChallenge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[certificatesResolvers.myresolver.acme]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [certificatesResolvers.myresolver.acme.tlsChallenge]</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.tlschallenge=true</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="httpchallenge"><code>httpChallenge</code><a href="#httpchallenge" class="hash-link" aria-label="Direct link to httpchallenge" title="Direct link to httpchallenge">​</a></h3>
<p>Use the <code>HTTP-01</code> challenge to generate and renew ACME certificates by provisioning an HTTP resource under a well-known URI.</p>
<p>As described on the Let&#x27;s Encrypt <a href="https://community.letsencrypt.org/t/support-for-ports-other-than-80-and-443/3419/72" target="_blank" rel="noopener noreferrer">community forum</a>,
when using the <code>HTTP-01</code> challenge, <code>certificatesresolvers.myresolver.acme.httpchallenge.entrypoint</code> must be reachable by Let&#x27;s Encrypt through port 80.</p>
<p>??? example &quot;Using an EntryPoint Called web for the <code>httpChallenge</code>&quot;</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">entryPoints</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">web</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">websecure</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">address</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">certificatesResolvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myresolver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">httpChallenge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">entryPoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> web</span><br></span></code></pre></div></div>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[entryPoints]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [entryPoints.web]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address = &quot;:80&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [entryPoints.websecure]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    address = &quot;:443&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[certificatesResolvers.myresolver.acme]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [certificatesResolvers.myresolver.acme.httpChallenge]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entryPoint = &quot;web&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">--entryPoints.web.address=:80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--entryPoints.websecure.address=:443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.httpchallenge.entrypoint=web</span><br></span></code></pre></div></div>
<p>!!! info &quot;&quot;
Redirection is fully compatible with the <code>HTTP-01</code> challenge.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="domain-definition">Domain Definition<a href="#domain-definition" class="hash-link" aria-label="Direct link to Domain Definition" title="Direct link to Domain Definition">​</a></h2>
<p>A certificate resolver requests certificates for a set of domain names inferred from routers, according to the following:</p>
<ul>
<li>
<p>If the IngressRoute has a <code>tls.domains</code> option set,
then the certificate resolver derives this router domain name from the <code>main</code> option of <code>tls.domains</code>.</p>
</li>
<li>
<p>Otherwise, the certificate resolver derives the domain name from any <code>Host()</code> or <code>HostSNI()</code> matchers
in the IngressRoute&#x27;s rule.</p>
</li>
</ul>
<p>You can set SANs (alternative domains) for each main domain.
Every domain must have A/AAAA records pointing to Mesh.
Each domain &amp; SAN will lead to a certificate request.</p>
<p><a href="https://community.letsencrypt.org/t/acme-v2-and-wildcard-certificate-support-is-live/55579" target="_blank" rel="noopener noreferrer">ACME v2</a> supports wildcard certificates.
As described in <a href="https://community.letsencrypt.org/t/staging-endpoint-for-acme-v2/49605" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt&#x27;s post</a> wildcard certificates can only be generated through a <code>DNS-01</code> challenge.
It is not possible to request a double wildcard certificate for a domain (for example <code>*.*.local.com</code>).</p>
<p>Most likely the root domain should receive a certificate too, so it needs to be specified as SAN and 2 <code>DNS-01</code> challenges are invoked.
In such a case the generated DNS TXT record for both domains is the same.
Even though this behavior is <a href="https://community.letsencrypt.org/t/wildcard-issuance-two-txt-records-for-the-same-name/54528/2" target="_blank" rel="noopener noreferrer">DNS RFC</a> compliant,
it can lead to problems as all DNS providers keep DNS records cached for a given time (TTL) and this TTL can be greater than the challenge timeout making the <code>DNS-01</code> challenge fail.</p>
<p>The Mesh ACME client library <a href="https://github.com/go-acme/lego" target="_blank" rel="noopener noreferrer">lego</a> supports some but not all DNS providers to work around this issue.
The supported <code>provider</code> table indicates if they allow generating certificates for a wildcard domain and its root domain.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wildcard-domains">Wildcard Domains<a href="#wildcard-domains" class="hash-link" aria-label="Direct link to Wildcard Domains" title="Direct link to Wildcard Domains">​</a></h3>
<p><a href="https://community.letsencrypt.org/t/acme-v2-and-wildcard-certificate-support-is-live/55579" target="_blank" rel="noopener noreferrer">ACME V2</a> supports wildcard certificates.
As described in <a href="https://community.letsencrypt.org/t/staging-endpoint-for-acme-v2/49605" target="_blank" rel="noopener noreferrer">Let&#x27;s Encrypt&#x27;s post</a> wildcard certificates can only be generated through a <a href="#dnschallenge"><code>DNS-01</code> challenge</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-account-binding">External Account Binding<a href="#external-account-binding" class="hash-link" aria-label="Direct link to External Account Binding" title="Direct link to External Account Binding">​</a></h3>
<ul>
<li><code>kid</code>: Key identifier from External CA</li>
<li><code>hmacEncoded</code>: HMAC key from External CA, should be in Base64 URL Encoding without padding format</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">certificatesResolvers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">myresolver</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">acme</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">eab</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">kid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> abc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">keyID</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xyz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">hmacEncoded</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> abc</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">hmac</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">xyz</span><br></span></code></pre></div></div>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[certificatesResolvers.myresolver.acme]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  [certificatesResolvers.myresolver.acme.eab]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    kid = &quot;abc-keyID-xyz&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    hmacEncoded = &quot;abc-hmac-xyz&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.eab.kid=abc-keyID-xyz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--certificatesresolvers.myresolver.acme.eab.hmacencoded=abc-hmac-xyz</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-letsencrypt-with-kubernetes">Using LetsEncrypt with Kubernetes<a href="#using-letsencrypt-with-kubernetes" class="hash-link" aria-label="Direct link to Using LetsEncrypt with Kubernetes" title="Direct link to Using LetsEncrypt with Kubernetes">​</a></h2>
<p>When using LetsEncrypt with kubernetes, there are some known caveats with both the <a href="/doc/docs/reference/install-configuration/providers/kubernetes/kubernetes-ingress">Ingress</a> and <a href="/doc/docs/reference/install-configuration/providers/kubernetes/kubernetes-crd">CRD</a> providers.</p>
<p>!!! note
If you intend to run multiple instances of Mesh with LetsEncrypt, please ensure you read the sections on those provider pages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="letsencrypt-support-with-the-ingress-provider">LetsEncrypt Support with the Ingress Provider<a href="#letsencrypt-support-with-the-ingress-provider" class="hash-link" aria-label="Direct link to LetsEncrypt Support with the Ingress Provider" title="Direct link to LetsEncrypt Support with the Ingress Provider">​</a></h3>
<p>By design, Mesh is a stateless application,
meaning that it only derives its configuration from the environment it runs in,
without additional configuration.
For this reason, users can run multiple instances of Mesh at the same time to
achieve HA, as is a common pattern in the kubernetes ecosystem.</p>
<p>When using a single instance of Mesh Proxy with Let&#x27;s Encrypt,
you should encounter no issues. However, this could be a single point of failure.
Unfortunately, it is not possible to run multiple instances of Mesh 2.0
with Let&#x27;s Encrypt enabled, because there is no way to ensure that the correct
instance of Mesh receives the challenge request, and subsequent responses.
Early versions (v1.x) of Mesh used a
<a href="https://doc.Mesh.io/Mesh/v1.7/configuration/acme/#storage" target="_blank" rel="noopener noreferrer">KV store</a>
to attempt to achieve this, but due to sub-optimal performance that feature
was dropped in 2.0.</p>
<p>If you need Let&#x27;s Encrypt with high availability in a Kubernetes environment,
we recommend using <a href="https://Mesh.io/mesh-enterprise/" target="_blank" rel="noopener noreferrer">Mesh Enterprise</a>
which includes distributed Let&#x27;s Encrypt as a supported feature.</p>
<p>If you want to keep using Mesh Proxy,
LetsEncrypt HA can be achieved by using a Certificate Controller such as <a href="https://cert-manager.io/docs/" target="_blank" rel="noopener noreferrer">Cert-Manager</a>.
When using Cert-Manager to manage certificates,
it creates secrets in your namespaces that can be referenced as TLS secrets in
your <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/#tls" target="_blank" rel="noopener noreferrer">ingress objects</a>
.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fallback">Fallback<a href="#fallback" class="hash-link" aria-label="Direct link to Fallback" title="Direct link to Fallback">​</a></h2>
<p>If Let&#x27;s Encrypt is not reachable, the following certificates will apply:</p>
<ol>
<li>Previously generated ACME certificates (before downtime)</li>
<li>Expired ACME certificates</li>
<li>Provided certificates</li>
</ol>
<p>!!! important
For new (sub)domains which need Let&#x27;s Encrypt authentication, the default Mesh certificate will be used until Mesh is restarted.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/reference/install-configuration/tls/certificate-resolvers/acme.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc/docs/reference/install-configuration/providers/swarm"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Mesh Docker Swarm Documentation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc/docs/reference/install-configuration/tls/certificate-resolvers/overview"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Certificates Resolver</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration-example" class="table-of-contents__link toc-highlight">Configuration Example</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a></li><li><a href="#automatic-certificate-renewal" class="table-of-contents__link toc-highlight">Automatic Certificate Renewal</a></li><li><a href="#the-different-acme-challenges" class="table-of-contents__link toc-highlight">The Different ACME Challenges</a><ul><li><a href="#dnschallenge" class="table-of-contents__link toc-highlight">dnsChallenge</a></li><li><a href="#tlschallenge" class="table-of-contents__link toc-highlight"><code>tlsChallenge</code></a></li><li><a href="#httpchallenge" class="table-of-contents__link toc-highlight"><code>httpChallenge</code></a></li></ul></li><li><a href="#domain-definition" class="table-of-contents__link toc-highlight">Domain Definition</a><ul><li><a href="#wildcard-domains" class="table-of-contents__link toc-highlight">Wildcard Domains</a></li><li><a href="#external-account-binding" class="table-of-contents__link toc-highlight">External Account Binding</a></li></ul></li><li><a href="#using-letsencrypt-with-kubernetes" class="table-of-contents__link toc-highlight">Using LetsEncrypt with Kubernetes</a><ul><li><a href="#letsencrypt-support-with-the-ingress-provider" class="table-of-contents__link toc-highlight">LetsEncrypt Support with the Ingress Provider</a></li></ul></li><li><a href="#fallback" class="table-of-contents__link toc-highlight">Fallback</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/doc/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">其他</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/doc/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/opendatav/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mesh, Inc. Built with Mesh.</div></div></div></footer></div>
</body>
</html>