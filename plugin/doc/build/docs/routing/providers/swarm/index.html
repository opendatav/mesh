<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-routing/providers/swarm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Mesh Docker Swarm Routing Documentation | 文档中心</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://github.com/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://github.com/doc/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://github.com/doc/docs/routing/providers/swarm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mesh Docker Swarm Routing Documentation | 文档中心"><meta data-rh="true" name="description" content="This guide will teach you how to attach labels to your containers, to route traffic and load balance with Mesh and Docker."><meta data-rh="true" property="og:description" content="This guide will teach you how to attach labels to your containers, to route traffic and load balance with Mesh and Docker."><link data-rh="true" rel="icon" href="/doc/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://github.com/doc/docs/routing/providers/swarm"><link data-rh="true" rel="alternate" href="https://github.com/doc/docs/routing/providers/swarm" hreflang="en"><link data-rh="true" rel="alternate" href="https://github.com/doc/docs/routing/providers/swarm" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"路由和负载均衡","item":"https://github.com/doc/docs/category/路由和负载均衡"},{"@type":"ListItem","position":2,"name":"Mesh Docker Swarm Routing Documentation","item":"https://github.com/doc/docs/routing/providers/swarm"}]}</script><link rel="alternate" type="application/rss+xml" href="/doc/blog/rss.xml" title="文档中心 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/doc/blog/atom.xml" title="文档中心 Atom Feed"><link rel="stylesheet" href="/doc/assets/css/styles.2eab34b2.css">
<script src="/doc/assets/js/runtime~main.2bae97f1.js" defer="defer"></script>
<script src="/doc/assets/js/main.1caca4db.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/doc/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/doc/"><div class="navbar__logo"><img src="/doc/img/logo.png" alt="金融服务网关Icon" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/doc/img/logo.png" alt="金融服务网关Icon" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">金融服务网关</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/doc/docs/intro">使用文档</a><a class="navbar__item navbar__link" href="/doc/blog">技术博客</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/opendatav/mesh" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/intro">快速指引</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/开始使用">开始使用</a><button aria-label="Expand sidebar category &#x27;开始使用&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/动态配置管理">动态配置管理</a><button aria-label="Expand sidebar category &#x27;动态配置管理&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/doc/docs/category/路由和负载均衡">路由和负载均衡</a><button aria-label="Collapse sidebar category &#x27;路由和负载均衡&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/entrypoints">Mesh EntryPoints Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/overview">Routing &amp; Load Balancing Overview |Mesh Docs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/doc/docs/routing/providers/consul-catalog">providers</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/consul-catalog">Mesh Consul Catalog Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/docker">Mesh Docker Routing Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/ecs">Mesh ECS Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/kubernetes-crd">Routing Configuration for Mesh CRD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/kubernetes-gateway">Mesh Kubernetes Gateway</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/kubernetes-ingress">Kubernetes Ingress Routing Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/kv">Mesh Routing Configuration with KV stores</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/nomad">Mesh Nomad Service Discovery Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/providers/service-by-label">service-by-label</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/doc/docs/routing/providers/swarm">Mesh Docker Swarm Routing Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/routers/">Mesh Routers Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/doc/docs/routing/services/">Mesh Services Documentation</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/代码贡献">代码贡献</a><button aria-label="Expand sidebar category &#x27;代码贡献&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/版本兼容">版本兼容</a><button aria-label="Expand sidebar category &#x27;版本兼容&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/doc/docs/category/https协议">HTTPS协议</a><button aria-label="Expand sidebar category &#x27;HTTPS协议&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/includes/kubernetes-requirements">includes</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/">Mesh Proxy Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/middlewares/http/addprefix">middlewares</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/observability/access-logs">observability</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/operations/api">operations</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/doc/docs/plugins/">Mesh Plugins Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/providers/consul-catalog">providers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/security/content-length">security</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/doc/docs/user-guides/cert-manager">user-guides</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/doc/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/doc/docs/category/路由和负载均衡"><span>路由和负载均衡</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">providers</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Mesh Docker Swarm Routing Documentation</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mesh &amp; Docker Swarm</h1></header>
<p>A Story of Labels &amp; Containers</p>
<p><img decoding="async" loading="lazy" alt="Swarm" src="/doc/assets/images/docker-3158549aee80e7d78ffd53edf9c601b5.png" width="719" height="398" class="img_ev3q"></p>
<p>Attach labels to your containers and let Mesh do the rest!</p>
<p>One of the best feature of Mesh is to delegate the routing configuration to the application level.
With Docker Swarm, Mesh can leverage labels attached to a service to generate routing rules.</p>
<p>!!! warning &quot;Labels &amp; sensitive data&quot;</p>
<p>We recommend to <em>not</em> use labels to store sensitive data (certificates, credentials, etc).
Instead, we recommend to store sensitive data in a safer storage (secrets, file, etc).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-examples">Configuration Examples<a href="#configuration-examples" class="hash-link" aria-label="Direct link to Configuration Examples" title="Direct link to Configuration Examples">​</a></h2>
<p>??? example &quot;Configuring Docker Swarm &amp; Deploying / Exposing one Service&quot;</p>
<p>Enabling the docker provider (Swarm Mode)</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">providers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">swarm</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># swarm classic (1.12-)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># endpoint: &quot;tcp://127.0.0.1:2375&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># docker swarm mode (1.12+)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">endpoint</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tcp://127.0.0.1:2377&quot;</span><br></span></code></pre></div></div>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[providers.swarm]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # swarm classic (1.12-)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # endpoint = &quot;tcp://127.0.0.1:2375&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # docker swarm mode (1.12+)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  endpoint = &quot;tcp://127.0.0.1:2377&quot;</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># swarm classic (1.12-)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># --providers.swarm.endpoint=tcp://127.0.0.1:2375</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># docker swarm mode (1.12+)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--providers.swarm.endpoint=tcp://127.0.0.1:2377</span><br></span></code></pre></div></div>
<p>Attach labels to services (not containers) while in Swarm mode (in your Docker compose file).
When there is only one service, and the router does not specify a service,
then that service is automatically assigned to the router.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container.rule=Host(`example.com`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.services.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service.loadbalancer.server.port=8080</span><br></span></code></pre></div></div>
<p>!!! important &quot;Labels in Docker Swarm Mode&quot;
While in Swarm Mode, Mesh uses labels found on services, not on individual containers.
Therefore, if you use a compose file with Swarm Mode, labels should be defined in the <code>deploy</code> part of your service.
This behavior is only enabled for docker-compose version 3+ (<a href="https://docs.docker.com/compose/compose-file/compose-file-v3/#labels-1" target="_blank" rel="noopener noreferrer">Compose file reference</a>).</p>
<p>??? example &quot;Specify a Custom Port for the Container&quot;</p>
<p>Forward requests for <code>http://example.com</code> to <code>http://&lt;private IP of container&gt;:12345</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container.rule=Host(`example.com`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container.service=my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Tell Mesh to use the port 12345 to connect to `my-container`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.services.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service.loadbalancer.server.port=12345</span><br></span></code></pre></div></div>
<p>!!! important &quot;Mesh Connecting to the Wrong Port: <code>HTTP/502 Gateway Error</code>&quot;
By default, Mesh uses the lowest exposed port of a container as detailed in
<a href="/doc/docs/routing/providers/swarm#port-detection">Port Detection</a> of the Swarm provider.</p>
<p>Setting the label <code>Mesh.http.services.xxx.loadbalancer.server.port</code>
overrides this behavior.</p>
<p>??? example &quot;Specifying more than one router and service per container&quot;</p>
<p>Forwarding requests to more than one port on a container requires referencing the service loadbalancer port definition using the service parameter on the router.</p>
<p>In this example, requests are forwarded for <code>http://example-a.com</code> to <code>http://&lt;private IP of container&gt;:8000</code> in addition to <code>http://example-b.com</code> forwarding to <code>http://&lt;private IP of container&gt;:9000</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;3&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.www</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">router.rule=Host(`example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">a.com`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.www</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">router.service=www</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.services.www</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service.loadbalancer.server.port=8000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">router.rule=Host(`example</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">b.com`)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">router.service=admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.services.admin</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">service.loadbalancer.server.port=9000</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="routing-configuration">Routing Configuration<a href="#routing-configuration" class="hash-link" aria-label="Direct link to Routing Configuration" title="Direct link to Routing Configuration">​</a></h2>
<p>!!! info &quot;Labels&quot;</p>
<ul>
<li>Labels are case-insensitive.</li>
<li>The complete list of labels can be found in <a href="/doc/docs/reference/dynamic-configuration/docker">the reference page</a>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general">General<a href="#general" class="hash-link" aria-label="Direct link to General" title="Direct link to General">​</a></h3>
<p>Mesh creates, for each container, a corresponding <a href="/doc/docs/routing/services/">service</a> and <a href="/doc/docs/routing/routers/">router</a>.</p>
<p>The Service automatically gets a server per instance of the container,
and the router automatically gets a rule defined by <code>defaultRule</code> (if no rule for it was defined in labels).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="service-definition">Service definition<a href="#service-definition" class="hash-link" aria-label="Direct link to Service definition" title="Direct link to Service definition">​</a></h4>
<p>??? example &quot;Automatic service assignment with labels&quot;</p>
<p>With labels in a compose file</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myproxy.rule=Host(`example.net`)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># service myservice gets automatically assigned to router myproxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.server.port=80&quot;</span><br></span></code></pre></div></div>
<p>??? example &quot;Automatic service creation and assignment with labels&quot;</p>
<p>With labels in a compose file</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># no service specified or defined and yet one gets automatically created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># and assigned to router myproxy.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myproxy.rule=Host(`example.net`)&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="routers">Routers<a href="#routers" class="hash-link" aria-label="Direct link to Routers" title="Direct link to Routers">​</a></h3>
<p>To update the configuration of the Router automatically attached to the container,
add labels starting with <code>Mesh.http.routers.&lt;name-of-your-choice&gt;.</code> and followed by the option you want to change.</p>
<p>For example, to change the rule, you could add the label <code>Mesh.http.routers.my-container.rule=Host(`example.com`)</code>.</p>
<p>!!! warning &quot;The character <code>@</code> is not authorized in the router name <code>&lt;router_name&gt;</code>.&quot;</p>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.rule</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#rule">rule</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.rule=Host(`example.com`)&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.entrypoints</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#entrypoints">entry points</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.entrypoints=ep1,ep2&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.middlewares</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#middlewares">middlewares</a> and <a href="/doc/docs/middlewares/overview">middlewares overview</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.middlewares=auth,prefix,cb&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.service</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#service">service</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.service=myservice&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.tls</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#tls">tls</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.tls=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.tls.certresolver</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#certresolver">certResolver</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.tls.certresolver=myresolver&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.tls.domains[n].main</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#domains">domains</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.tls.domains[0].main=example.org&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.tls.domains[n].sans</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#domains">domains</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.tls.domains[0].sans=test.example.org,dev.example.org&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.tls.options</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#options">options</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.tls.options=foobar&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.observability.accesslogs</code>&quot;</p>
<p>See accesslogs <a href="/doc/docs/routing/routers/#accesslogs">option</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.observability.accesslogs=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.observability.metrics</code>&quot;</p>
<p>See metrics <a href="/doc/docs/routing/routers/#metrics">option</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.observability.metrics=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.observability.tracing</code>&quot;</p>
<p>See tracing <a href="/doc/docs/routing/routers/#tracing">option</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.observability.tracing=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.routers.&lt;router_name&gt;.priority</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#priority">priority</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.routers.myrouter.priority=42&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="services">Services<a href="#services" class="hash-link" aria-label="Direct link to Services" title="Direct link to Services">​</a></h3>
<p>To update the configuration of the Service automatically attached to the container,
add labels starting with <code>Mesh.http.services.&lt;name-of-your-choice&gt;.</code>, followed by the option you want to change.</p>
<p>For example, to change the <code>passHostHeader</code> behavior,
you&#x27;d add the label <code>Mesh.http.services.&lt;name-of-your-choice&gt;.loadbalancer.passhostheader=false</code>.</p>
<p>!!! warning &quot;The character <code>@</code> is not authorized in the service name <code>&lt;service_name&gt;</code>.&quot;</p>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.server.port</code>&quot;</p>
<p>Registers a port.
Useful when the container exposes multiples ports.</p>
<p>Mandatory for Docker Swarm (see the section <a href="/doc/docs/providers/swarm#port-detection">&quot;Port Detection with Docker Swarm&quot;</a>).</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.server.port=8080&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.server.scheme</code>&quot;</p>
<p>Overrides the default scheme.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.server.scheme=http&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.server.url</code>&quot;</p>
<p>Defines the service URL.
This option cannot be used in combination with <code>port</code> or <code>scheme</code> definition.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.server.url=http://foobar:8080&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.serverstransport</code>&quot;</p>
<p>Allows to reference a ServersTransport resource that is defined either with the File provider or the Kubernetes CRD one.
See <a href="/doc/docs/routing/services/#serverstransport">serverstransport</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.&lt;service_name&gt;.loadbalancer.serverstransport=foobar@file&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.passhostheader</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#pass-host-header">pass Host header</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.passhostheader=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.headers.&lt;header_name&gt;</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.headers.X-Foo=foobar&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.hostname</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.hostname=example.org&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.interval</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.interval=10s&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.unhealthyinterval</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.unhealthyinterval=10s&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.path</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.path=/foo&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.method</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.method=foobar&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.status</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.status=42&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.port</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.port=42&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.scheme</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.scheme=http&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.timeout</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.timeout=10s&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.healthcheck.followredirects</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#health-check">health check</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.healthcheck.followredirects=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie.httponly</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie.httponly=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie.name</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie.name=foobar&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie.path</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie.path=/foobar&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie.secure</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie.secure=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie.samesite</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie.samesite=none&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.sticky.cookie.domain</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#sticky-sessions">sticky sessions</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.sticky.cookie.domain=foo.com&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.responseforwarding.flushinterval</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#response-forwarding">response forwarding</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.responseforwarding.flushinterval=10&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.http.services.&lt;service_name&gt;.loadbalancer.strategy</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#load-balancing-strategy">load balancing strategy</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.http.services.myservice.loadbalancer.strategy=p2c&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="middleware">Middleware<a href="#middleware" class="hash-link" aria-label="Direct link to Middleware" title="Direct link to Middleware">​</a></h3>
<p>You can declare pieces of middleware using labels starting with <code>Mesh.http.middlewares.&lt;name-of-your-choice&gt;.</code>,
followed by the middleware type/options.</p>
<p>For example, to declare a middleware <a href="/doc/docs/middlewares/http/redirectscheme"><code>redirectscheme</code></a> named <code>my-redirect</code>,
you&#x27;d write <code>Mesh.http.middlewares.my-redirect.redirectscheme.scheme=https</code>.</p>
<p>More information about available middlewares in the dedicated <a href="/doc/docs/middlewares/overview">middlewares section</a>.</p>
<p>!!! warning &quot;The character <code>@</code> is not authorized in the middleware name.&quot;</p>
<p>??? example &quot;Declaring and Referencing a Middleware&quot;</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Declaring a middleware</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.middlewares.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">redirect.redirectscheme.scheme=https</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Referencing a middleware</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> Mesh.http.routers.my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">container.middlewares=my</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">redirect</span><br></span></code></pre></div></div>
<p>!!! warning &quot;Conflicts in Declaration&quot;</p>
<p>If you declare multiple middleware with the same name but with different parameters, the middleware fails to be declared.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tcp">TCP<a href="#tcp" class="hash-link" aria-label="Direct link to TCP" title="Direct link to TCP">​</a></h3>
<p>You can declare TCP Routers and/or Services using labels.</p>
<p>??? example &quot;Declaring TCP Routers and Services&quot;</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.my-router.rule=HostSNI(`example.com`)&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.my-router.tls=true&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.services.my-service.loadbalancer.server.port=4123&quot;</span><br></span></code></pre></div></div>
<p>!!! warning &quot;TCP and HTTP&quot;</p>
<p>If you declare a TCP Router/Service, it will prevent Mesh from automatically creating an HTTP Router/Service (like it does by default if no TCP Router/Service is defined).
You can declare both a TCP Router/Service and an HTTP Router/Service for the same container (but you have to do so manually).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tcp-routers">TCP Routers<a href="#tcp-routers" class="hash-link" aria-label="Direct link to TCP Routers" title="Direct link to TCP Routers">​</a></h4>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.entrypoints</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#entrypoints_1">entry points</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.entrypoints=ep1,ep2&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.rule</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#rule_1">rule</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.rule=HostSNI(`example.com`)&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.service</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#services">service</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.service=myservice&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.tls</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#tls_1">TLS</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.tls=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.tls.certresolver</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#certresolver_1">certResolver</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.tls.certresolver=myresolver&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.tls.domains[n].main</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#domains_1">domains</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.tls.domains[0].main=example.org&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.tls.domains[n].sans</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#domains_1">domains</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.tls.domains[0].sans=test.example.org,dev.example.org&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.tls.options</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#options_1">options</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.tls.options=mysoptions&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.tls.passthrough</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#tls_1">TLS</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.mytcprouter.tls.passthrough=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.routers.&lt;router_name&gt;.priority</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#priority_1">priority</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.routers.myrouter.priority=42&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tcp-services">TCP Services<a href="#tcp-services" class="hash-link" aria-label="Direct link to TCP Services" title="Direct link to TCP Services">​</a></h4>
<p>??? info &quot;<code>Mesh.tcp.services.&lt;service_name&gt;.loadbalancer.server.port</code>&quot;</p>
<p>Registers a port of the application.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.services.mytcpservice.loadbalancer.server.port=423&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.services.&lt;service_name&gt;.loadbalancer.server.tls</code>&quot;</p>
<p>Determines whether to use TLS when dialing with the backend.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.services.mytcpservice.loadbalancer.server.tls=true&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.services.&lt;service_name&gt;.loadbalancer.proxyprotocol.version</code>&quot;</p>
<p>See <a href="/doc/docs/routing/services/#proxy-protocol">PROXY protocol</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.services.mytcpservice.loadbalancer.proxyprotocol.version=1&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.tcp.services.&lt;service_name&gt;.loadbalancer.serverstransport</code>&quot;</p>
<p>Allows to reference a ServersTransport resource that is defined either with the File provider or the Kubernetes CRD one.
See <a href="/doc/docs/routing/services/#serverstransport_2">serverstransport</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.tcp.services.&lt;service_name&gt;.loadbalancer.serverstransport=foobar@file&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="udp">UDP<a href="#udp" class="hash-link" aria-label="Direct link to UDP" title="Direct link to UDP">​</a></h3>
<p>You can declare UDP Routers and/or Services using labels.</p>
<p>??? example &quot;Declaring UDP Routers and Services&quot;</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">services</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">my-container</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.udp.routers.my-router.entrypoints=udp&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.udp.services.my-service.loadbalancer.server.port=4123&quot;</span><br></span></code></pre></div></div>
<p>!!! warning &quot;UDP and HTTP&quot;</p>
<p>If you declare a UDP Router/Service, it will prevent Mesh from automatically creating an HTTP Router/Service (like it does by default if no UDP Router/Service is defined).
You can declare both a UDP Router/Service and an HTTP Router/Service for the same container (but you have to do so manually).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="udp-routers">UDP Routers<a href="#udp-routers" class="hash-link" aria-label="Direct link to UDP Routers" title="Direct link to UDP Routers">​</a></h4>
<p>??? info &quot;<code>Mesh.udp.routers.&lt;router_name&gt;.entrypoints</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#entrypoints_2">entry points</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.udp.routers.myudprouter.entrypoints=ep1,ep2&quot;</span><br></span></code></pre></div></div>
<p>??? info &quot;<code>Mesh.udp.routers.&lt;router_name&gt;.service</code>&quot;</p>
<p>See <a href="/doc/docs/routing/routers/#services_1">service</a> for more information.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.udp.routers.myudprouter.service=myservice&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="udp-services">UDP Services<a href="#udp-services" class="hash-link" aria-label="Direct link to UDP Services" title="Direct link to UDP Services">​</a></h4>
<p>??? info &quot;<code>Mesh.udp.services.&lt;service_name&gt;.loadbalancer.server.port</code>&quot;</p>
<p>Registers a port of the application.</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.udp.services.myudpservice.loadbalancer.server.port=423&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="specific-provider-options">Specific Provider Options<a href="#specific-provider-options" class="hash-link" aria-label="Direct link to Specific Provider Options" title="Direct link to Specific Provider Options">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="meshenable"><code>Mesh.enable</code><a href="#meshenable" class="hash-link" aria-label="Direct link to meshenable" title="Direct link to meshenable">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.enable=true&quot;</span><br></span></code></pre></div></div>
<p>You can tell Mesh to consider (or not) the container by setting <code>Mesh.enable</code> to true or false.</p>
<p>This option overrides the value of <code>exposedByDefault</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="meshswarmnetwork"><code>Mesh.swarm.network</code><a href="#meshswarmnetwork" class="hash-link" aria-label="Direct link to meshswarmnetwork" title="Direct link to meshswarmnetwork">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.swarm.network=mynetwork&quot;</span><br></span></code></pre></div></div>
<p>Overrides the default docker network to use for connections to the container.</p>
<p>If a container is linked to several networks, be sure to set the proper network name (you can check this with <code>docker inspect &lt;container_id&gt;</code>),
otherwise it will randomly pick one (depending on how docker is returning them).</p>
<p>!!! warning
When deploying a stack from a compose file <code>stack</code>, the networks defined are prefixed with <code>stack</code>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="meshswarmlbswarm"><code>Mesh.swarm.lbswarm</code><a href="#meshswarmlbswarm" class="hash-link" aria-label="Direct link to meshswarmlbswarm" title="Direct link to meshswarmlbswarm">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Mesh.docker.lbswarm=true&quot;</span><br></span></code></pre></div></div>
<p>Enables Swarm&#x27;s inbuilt load balancer (only relevant in Swarm Mode).</p>
<p>If you enable this option, Mesh will use the virtual IP provided by docker swarm instead of the containers IPs.
Which means that Mesh will not perform any kind of load balancing and will delegate this task to swarm.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/opendatav/mesh/tree/main/packages/create-docusaurus/templates/shared/docs/routing/providers/swarm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/doc/docs/routing/providers/service-by-label"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">service-by-label</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/doc/docs/routing/routers/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mesh Routers Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#configuration-examples" class="table-of-contents__link toc-highlight">Configuration Examples</a></li><li><a href="#routing-configuration" class="table-of-contents__link toc-highlight">Routing Configuration</a><ul><li><a href="#general" class="table-of-contents__link toc-highlight">General</a></li><li><a href="#routers" class="table-of-contents__link toc-highlight">Routers</a></li><li><a href="#services" class="table-of-contents__link toc-highlight">Services</a></li><li><a href="#middleware" class="table-of-contents__link toc-highlight">Middleware</a></li><li><a href="#tcp" class="table-of-contents__link toc-highlight">TCP</a></li><li><a href="#udp" class="table-of-contents__link toc-highlight">UDP</a></li><li><a href="#specific-provider-options" class="table-of-contents__link toc-highlight">Specific Provider Options</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/doc/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">其他</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/doc/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/opendatav/mesh" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Mesh, Inc. Built with Mesh.</div></div></div></footer></div>
</body>
</html>